{"version":3,"file":null,"sources":["../node_modules/europa-core/node_modules/lodash.assign/index.js","../node_modules/europa-core/node_modules/lodash.forown/index.js","../node_modules/europa-core/node_modules/oopsy/dist/oopsy.js","../node_modules/europa-core/lib/plugin/plugin.js","../node_modules/europa-core/lib/plugin/predefined/anchor.js","../node_modules/europa-core/lib/plugin/predefined/block-quote.js","../node_modules/europa-core/lib/plugin/predefined/break.js","../node_modules/europa-core/lib/plugin/predefined/code.js","../node_modules/europa-core/lib/plugin/predefined/strong.js","../node_modules/europa-core/lib/plugin/predefined/definition-term.js","../node_modules/europa-core/lib/plugin/predefined/details.js","../node_modules/europa-core/lib/plugin/predefined/emphasis.js","../node_modules/europa-core/lib/plugin/predefined/empty.js","../node_modules/europa-core/lib/plugin/predefined/heading.js","../node_modules/europa-core/lib/plugin/predefined/horizontal-rule.js","../node_modules/europa-core/lib/plugin/predefined/image.js","../node_modules/europa-core/lib/utilities.js","../node_modules/europa-core/lib/plugin/predefined/list-item.js","../node_modules/europa-core/lib/plugin/predefined/ordered-list.js","../node_modules/europa-core/lib/plugin/predefined/paragraph.js","../node_modules/europa-core/lib/plugin/predefined/preformatted.js","../node_modules/europa-core/lib/plugin/preset/preset.js","../node_modules/europa-core/lib/plugin/predefined/quote.js","../node_modules/europa-core/lib/plugin/predefined/unordered-list.js","../node_modules/europa-core/lib/plugin/preset/default.js","../node_modules/europa-core/lib/transformation.js","../node_modules/europa-core/lib/transformer.js","../node_modules/europa-core/lib/europa.js","../node_modules/europa-core/lib/index.js","../node_modules/europa-core/lib/service/window-service.js","../lib/service/native-window-service.js","../lib/index.js"],"sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max;\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (nonEnumShadows || isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = assign;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Iterates over own enumerable string keyed properties of an object and\n * invokes `iteratee` for each property. The iteratee is invoked with three\n * arguments: (value, key, object). Iteratee functions may exit iteration\n * early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 0.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forOwnRight\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forOwn(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forOwn(object, iteratee) {\n  return object && baseForOwn(object, typeof iteratee == 'function' ? iteratee : identity);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = forOwn;\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define('oopsy', factory) :\n  (global.Oopsy = factory());\n}(this, (function () { 'use strict';\n\n  /*\n   * Copyright (C) 2016 Alasdair Mercer, Skelp\n   *\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\n   * of this software and associated documentation files (the \"Software\"), to deal\n   * in the Software without restriction, including without limitation the rights\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n   * copies of the Software, and to permit persons to whom the Software is\n   * furnished to do so, subject to the following conditions:\n   *\n   * The above copyright notice and this permission notice shall be included in all\n   * copies or substantial portions of the Software.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n   * SOFTWARE.\n   */\n\n  /**\n   * A bare-bones constructor for surrogate prototype swapping.\n   *\n   * @private\n   * @constructor Constructor\n   */\n  var Constructor = function() {}\n  /**\n   * A reference to <code>Object.prototype.hasOwnProperty</code>.\n   *\n   * @private\n   * @type {Function}\n   */\n  var hasOwnProperty = Object.prototype.hasOwnProperty\n  /**\n   * A reference to <code>Array.prototype.slice</code>.\n   *\n   * @private\n   * @type {Function}\n   */\n  var slice = Array.prototype.slice\n\n  /**\n   * Extends the specified <code>target</code> object with the properties in each of the <code>sources</code> provided.\n   *\n   * Nothing happens if <code>target</code> is <code>null</code> and if any source is <code>null</code> it will be\n   * ignored.\n   *\n   * @param {boolean} own - <code>true</code> to only copy <b>own</b> properties from <code>sources</code> onto\n   * <code>target</code>; otherwise <code>false</code>\n   * @param {Object} [target] - the target object which should be extended\n   * @param {...Object} [sources] - the source objects whose properties are to be copied onto <code>target</code>\n   * @return {void}\n   * @private\n   */\n  function extend(own, target, sources) {\n    if (target == null) {\n      return\n    }\n\n    sources = slice.call(arguments, 2)\n\n    var property\n    var source\n\n    for (var i = 0, length = sources.length; i < length; i++) {\n      source = sources[i]\n\n      for (property in source) {\n        if (!own || hasOwnProperty.call(source, property)) {\n          target[property] = source[property]\n        }\n      }\n    }\n  }\n\n  /**\n   * Creates an object which inherits the given <code>prototype</code>.\n   *\n   * Optionally, the created object can be extended further with the specified <code>properties</code>.\n   *\n   * @param {Object} prototype - the prototype to be inherited by the created object\n   * @param {Object} [properties] - the optional properties to be extended by the created object\n   * @return {Object} The newly created object.\n   * @private\n   */\n  function create(prototype, properties) {\n    var result\n    if (typeof Object.create === 'function') {\n      result = Object.create(prototype)\n    } else {\n      Constructor.prototype = prototype\n      result = new Constructor()\n      Constructor.prototype = null\n    }\n\n    if (properties) {\n      extend(true, result, properties)\n    }\n\n    return result\n  }\n\n  /**\n   * The base constructor from which all others should extend.\n   *\n   * @public\n   * @constructor Oopsy\n   */\n  function Oopsy() {}\n\n  /**\n   * Extends the constructor to which this method is associated with the <code>prototype</code> and/or\n   * <code>statics</code> provided.\n   *\n   * If <code>constructor</code> is provided, it will be used as the constructor for the child, otherwise a simple\n   * constructor which only calls the super constructor will be used instead.\n   *\n   * The super constructor can be accessed via a special <code>super_</code> property on the child constructor.\n   *\n   * @param {Function} [constructor] - the constructor for the child\n   * @param {Object} [prototype] - the prototype properties to be defined for the child\n   * @param {Object} [statics] - the static properties to be defined for the child\n   * @return {Function} The child <code>constructor</code> provided or the one created if none was given.\n   * @public\n   * @static\n   */\n  Oopsy.extend = function(constructor, prototype, statics) {\n    var superConstructor = this\n\n    if (typeof constructor !== 'function') {\n      statics = prototype\n      prototype = constructor\n      constructor = function() {\n        return superConstructor.apply(this, arguments)\n      }\n    }\n\n    extend(false, constructor, superConstructor, statics)\n\n    constructor.prototype = create(superConstructor.prototype, prototype)\n    constructor.prototype.constructor = constructor\n\n    constructor.super_ = superConstructor\n\n    return constructor\n  }\n\n  var oopsy = Oopsy\n\n  return oopsy;\n\n})));\n\n//# sourceMappingURL=oopsy.js.map","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n/* eslint no-empty-function: \"off\" */\n\n'use strict'\n\nvar Oopsy = require('oopsy')\n\n/**\n * A plugin that can tap into multiple parts in the transformation process.\n *\n * @public\n * @constructor Plugin\n * @extends {Oopsy}\n */\nvar Plugin = Oopsy.extend({\n\n  /**\n   * Called after {@link Plugin#transform} <b>and</b> only once all children elements have been transformed as well,\n   * provided they weren't skipped, and intended for tidying up after the transformation.\n   *\n   * <code>context</code> can be used to receive any state for a single element transformation from\n   * {@link Plugin#before} and {@link Plugin#transform}.\n   *\n   * @param {Transformation} transformation - the current {@link Transformation}\n   * @param {Object<string, *>} context - the current context for this {@link Plugin}\n   * @return {void}\n   * @public\n   */\n  after: function(transformation, context) {},\n\n  /**\n   * Called before any elements are transformed and intended to setup this {@link Plugin} initially.\n   *\n   * @param {Transformation} transformation - the current {@link Transformation}.\n   * @return {void}\n   * @public\n   */\n  afterAll: function(transformation) {},\n\n  /**\n   * Called immediately before {@link Plugin#transform} and intended for preparing this {@link Plugin} for\n   * transformation.\n   *\n   * <code>context</code> can be used to pass any state for a single element transformation to {@link Plugin#transform}\n   * and then to {@link Plugin#after}.\n   *\n   * @param {Transformation} transformation - the current {@link Transformation}\n   * @param {Object<string, *>} context - the current context for this {@link Plugin}\n   * @return {void}\n   * @public\n   */\n  before: function(transformation, context) {},\n\n  /**\n   * Called after all elements have been transformed and intended to completing any steps for this {@link Plugin}.\n   *\n   * @param {Transformation} transformation - the current {@link Transformation}\n   * @return {void}\n   * @public\n   */\n  beforeAll: function(transformation) {},\n\n  /**\n   * Transforms the current element within the specified <code>transformation</code> which can be used to provide\n   * control over the transformation and returns whether the children of the element should be transformed.\n   *\n   * <code>context</code> can be used to pass any state for a single element transformation from {@link Plugin#before}\n   * to {@link Plugin#after}.\n   *\n   * @param {Transformation} transformation - the current {@link Transformation}\n   * @param {Object<string, *>} context - the current context for this {@link Plugin}\n   * @return {boolean} <code>true</code> if the children of the current element should be transformed; otherwise\n   * <code>false</code>.\n   * @public\n   */\n  transform: function(transformation, context) {\n    return true\n  }\n\n})\n\nexports.Plugin = Plugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which extracts the URL from an anchor. Anchors without an <code>href</code> are treated as plain\n * text.\n *\n * If the <code>absolute</code> option is enabled, then the URL extracted from the anchor will be absolute. Otherwise,\n * the URL will be exactly as it is in the <code>href</code> attribute.\n *\n * If the <code>inline</code> option is enabled, then the URL (and any <code>title</code> on the anchor) will be\n * inserted immediately after the anchor contents (e.g. <code>[foo](/bar)</code>). Otherwise, all unique URL and title\n * combinations will be indexed (e.g. <code>[foo][anchor0]</code>) and the references will be output at the very end.\n *\n * @public\n * @constructor AnchorPlugin\n * @extends {Plugin}\n */\nvar AnchorPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    if (context.value != null) {\n      transformation.output(']' + context.value)\n    }\n  },\n\n  /**\n   * @override\n   */\n  afterAll: function(transformation) {\n    var anchors = transformation.context.anchors\n    if (!anchors.length) {\n      return\n    }\n\n    transformation.append('\\n\\n')\n\n    for (var i = 0; i < anchors.length; i++) {\n      transformation.append('[anchor' + i + ']: ' + anchors[i] + '\\n')\n    }\n  },\n\n  /**\n   * @override\n   */\n  beforeAll: function(transformation) {\n    transformation.context.anchorMap = {}\n    transformation.context.anchors = []\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    var element = transformation.element\n    var options = transformation.options\n    var href = options.absolute ? element.href : element.getAttribute('href')\n    if (!href) {\n      return true\n    }\n\n    var anchorMap = transformation.context.anchorMap\n    var anchors = transformation.context.anchors\n    var index\n    var title = element.getAttribute('title')\n    var value = title ? href + ' \"' + title + '\"' : href\n\n    if (options.inline) {\n      context.value = '(' + value + ')'\n    } else {\n      index = anchorMap[value]\n      if (index == null) {\n        index = anchors.push(value) - 1\n\n        anchorMap[value] = index\n      }\n\n      context.value = '[anchor' + index + ']'\n    }\n\n    transformation.output('[')\n\n    transformation.atNoWhiteSpace = true\n\n    return true\n  }\n\n})\n\nexports.AnchorPlugin = AnchorPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs the contents in a block quote.\n *\n * @public\n * @constructor BlockQuotePlugin\n * @extends {Plugin}\n */\nvar BlockQuotePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    transformation.atLeft = false\n    transformation.atParagraph = false\n    transformation.left = context.previousLeft\n\n    transformation.appendParagraph()\n  },\n\n  /**\n   * @override\n   */\n  before: function(transformation, context) {\n    context.previousLeft = transformation.left\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    var value = '> '\n\n    transformation.left += value\n\n    if (transformation.atParagraph) {\n      transformation.append(value)\n    } else {\n      transformation.appendParagraph()\n    }\n\n    return true\n  }\n\n})\n\nexports.BlockQuotePlugin = BlockQuotePlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs an inline line break.\n *\n * @public\n * @constructor BreakPlugin\n * @extends {Plugin}\n */\nvar BreakPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    transformation.append('  ' + transformation.left)\n\n    transformation.atLeft = true\n    transformation.atNoWhiteSpace = true\n\n    return false\n  }\n\n})\n\nexports.BreakPlugin = BreakPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs the contents in a code block.\n *\n * @public\n * @constructor CodePlugin\n * @extends {Plugin}\n */\nvar CodePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    if (!context.skipped) {\n      transformation.inCodeBlock = context.previousInCodeBlock\n\n      transformation.output('`')\n    }\n  },\n\n  /**\n   * @override\n   */\n  before: function(transformation, context) {\n    context.previousInCodeBlock = transformation.inCodeBlock\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    if (transformation.inPreformattedBlock) {\n      context.skipped = true\n    } else {\n      transformation.output('`')\n\n      transformation.inCodeBlock = true\n    }\n\n    return true\n  }\n\n})\n\nexports.CodePlugin = CodePlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs as strong text.\n *\n * @public\n * @constructor StrongPlugin\n * @extends {Plugin}\n */\nvar StrongPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    transformation.output('**')\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    transformation.output('**')\n\n    transformation.atNoWhiteSpace = true\n\n    return true\n  }\n\n})\n\nexports.StrongPlugin = StrongPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar StrongPlugin = require('./strong').StrongPlugin\n\n/**\n * A {@link Plugin} which outputs a definition term as strong text.\n *\n * @public\n * @constructor DefinitionTermPlugin\n * @extends {StrongPlugin}\n */\nvar DefinitionTermPlugin = StrongPlugin.extend({\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    transformation.appendParagraph()\n\n    return DefinitionTermPlugin.super_.prototype.transform.call(this, transformation, context)\n  }\n\n})\n\nexports.DefinitionTermPlugin = DefinitionTermPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs a details section.\n *\n * If the details has an <code>open</code> attribute then all of its children are transformed. Otherwise, only the\n * nested <code>summary</code>, if any, will be transformed.\n *\n * @public\n * @constructor DetailsPlugin\n * @extends {Plugin}\n */\nvar DetailsPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    var element = transformation.element\n\n    transformation.appendParagraph()\n\n    if (element.hasAttribute('open')) {\n      return true\n    }\n\n    var summary = element.querySelector('summary')\n    transformation.transformer.transformElement(summary, transformation)\n\n    return false\n  }\n\n})\n\nexports.DetailsPlugin = DetailsPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs as emphasised text.\n *\n * @public\n * @constructor EmphasisPlugin\n * @extends {Plugin}\n */\nvar EmphasisPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    transformation.output('_')\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    transformation.output('_')\n\n    transformation.atNoWhiteSpace = true\n\n    return true\n  }\n\n})\n\nexports.EmphasisPlugin = EmphasisPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which simply ensures that all children elements are not transformed.\n *\n * @public\n * @constructor EmptyPlugin\n * @extends {Plugin}\n */\nvar EmptyPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    return false\n  }\n\n})\n\nexports.EmptyPlugin = EmptyPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs a heading of various levels.\n *\n * @public\n * @constructor HeadingPlugin\n * @extends {Plugin}\n */\nvar HeadingPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    var level = parseInt(transformation.tagName.match(/([1-6])$/)[1], 10)\n\n    transformation.appendParagraph()\n\n    var heading = ''\n    for (var i = 0; i < level; i++) {\n      heading += '#'\n    }\n\n    transformation.output(heading + ' ')\n\n    return true\n  }\n\n})\n\nexports.HeadingPlugin = HeadingPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs a horizontal rule.\n *\n * @public\n * @constructor HorizontalRulePlugin\n * @extends {Plugin}\n */\nvar HorizontalRulePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    transformation\n      .appendParagraph()\n      .output('---')\n      .appendParagraph()\n\n    return false\n  }\n\n})\n\nexports.HorizontalRulePlugin = HorizontalRulePlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which extracts the URL from an image.\n *\n * If the <code>absolute</code> option is enabled, then the URL extracted from the image will be absolute. Otherwise,\n * the URL will be exactly as it is in the <code>src</code> attribute.\n *\n * If the <code>inline</code> option is enabled, then the URL will be inserted immediately after the <code>alt</code> on\n * the image (e.g. <code>![foo](/bar.png)</code>). Otherwise, all unique URLs will be indexed\n * (e.g. <code>![foo][image0]</code>) and the references will be output at the very end.\n *\n * @public\n * @constructor ImagePlugin\n * @extends {Plugin}\n */\nvar ImagePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  afterAll: function(transformation) {\n    var images = transformation.context.images\n    if (!images.length) {\n      return\n    }\n\n    transformation.append('\\n\\n')\n\n    for (var i = 0; i < images.length; i++) {\n      transformation.append('[image' + i + ']: ' + images[i] + '\\n')\n    }\n  },\n\n  /**\n   * @override\n   */\n  beforeAll: function(transformation) {\n    transformation.context.imageMap = {}\n    transformation.context.images = []\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    var element = transformation.element\n    var options = transformation.options\n    var source = options.absolute ? element.src : element.getAttribute('src')\n    if (!source) {\n      return false\n    }\n\n    var alternativeText = element.getAttribute('alt') || ''\n    var imageMap = transformation.context.imageMap\n    var images = transformation.context.images\n    var index\n    var title = element.getAttribute('title')\n    var value = title ? source + ' \"' + title + '\"' : source\n\n    if (options.inline) {\n      value = '(' + value + ')'\n    } else {\n      index = imageMap[value]\n      if (index == null) {\n        index = images.push(value) - 1\n\n        imageMap[value] = index\n      }\n\n      value = '[image' + index + ']'\n    }\n\n    transformation.output('![' + alternativeText + ']' + value)\n\n    return false\n  }\n\n})\n\nexports.ImagePlugin = ImagePlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Oopsy = require('oopsy')\n\n/**\n * Contains utility methods that are useful throughout the library.\n *\n * @public\n * @constructor Utilities\n * @extends {Oopsy}\n */\nvar Utilities = Oopsy.extend(null, {\n\n  /**\n   * Left pads the <code>string</code> provided with the given padding string for the specified number of\n   * <code>times</code>.\n   *\n   * @param {string} [string=\"\"] - the string to be padded\n   * @param {number} [times=0] - the number of times to pad <code>string</code>\n   * @param {string} [padding=\" \"] - the padding string\n   * @return {string} The padded <code>string</code>.\n   * @public\n   * @static\n   */\n  leftPad: function(string, times, padding) {\n    if (string == null) {\n      string = ''\n    }\n    if (times == null) {\n      times = 0\n    }\n    if (padding == null) {\n      padding = ' '\n    }\n    if (!padding) {\n      return string\n    }\n\n    for (var i = 0; i < times; i++) {\n      string = padding + string\n    }\n\n    return string\n  },\n\n  /**\n   * Throws an error indicating that the a given method on a specific class has not been implemented.\n   *\n   * @param {string} className - the name of the class on which the method has not been implemented\n   * @param {string} methodName - the name of the method which has not been implemented\n   * @return {void}\n   * @throws {Error} The error describing the class method which has not been implemented.\n   * @public\n   * @static\n   */\n  throwUnimplemented: function(className, methodName) {\n    throw new Error('\"' + methodName + '\" method must be implemented on the \"' + className + '\" class')\n  }\n\n})\n\nexports.Utilities = Utilities\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\nvar Utilities = require('../../utilities').Utilities\n\n/**\n * A {@link Plugin} which outputs a list item. The prefix for the list item will vary depending on what type of list the\n * item is contained within.\n *\n * @public\n * @constructor ListItemPlugin\n * @extends {Plugin}\n */\nvar ListItemPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    var value = transformation.inOrderedList ? transformation.listIndex++ + '. ' : '* '\n\n    if (!transformation.atLeft) {\n      transformation.append(transformation.left.replace(/[ ]{2,4}$/, '\\n'))\n\n      transformation.atLeft = true\n      transformation.atNoWhiteSpace = true\n      transformation.atParagraph = true\n    } else if (transformation.last) {\n      transformation.last = transformation.last.replace(/[ ]{2,4}$/, '\\n')\n    }\n\n    transformation.append(Utilities.leftPad(value, (transformation.listDepth - 1) * 2))\n\n    return true\n  }\n\n})\n\nexports.ListItemPlugin = ListItemPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs an ordered list.\n *\n * @public\n * @constructor OrderedListPlugin\n * @extends {Plugin}\n */\nvar OrderedListPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    transformation.inOrderedList = context.previousInOrderedList\n    transformation.listIndex = context.previousListIndex\n    transformation.listDepth--\n  },\n\n  /**\n   * @override\n   */\n  before: function(transformation, context) {\n    context.previousInOrderedList = transformation.inOrderedList\n    context.previousListIndex = transformation.listIndex\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    if (transformation.listDepth === 0) {\n      transformation.appendParagraph()\n    }\n\n    transformation.inOrderedList = true\n    transformation.listIndex = 1\n    transformation.listDepth++\n\n    return true\n  }\n\n})\n\nexports.OrderedListPlugin = OrderedListPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs a paragraph.\n *\n * @public\n * @constructor ParagraphPlugin\n * @extends {Plugin}\n */\nvar ParagraphPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    transformation.appendParagraph()\n\n    return true\n  }\n\n})\n\nexports.ParagraphPlugin = ParagraphPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs the contents in a preformatted block.\n *\n * @public\n * @constructor PreformattedPlugin\n * @extends {Plugin}\n */\nvar PreformattedPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    transformation.atLeft = false\n    transformation.atParagraph = false\n    transformation.inPreformattedBlock = context.previousInPreformattedBlock\n    transformation.left = context.previousLeft\n\n    transformation.appendParagraph()\n  },\n\n  /**\n   * @override\n   */\n  before: function(transformation, context) {\n    context.previousInPreformattedBlock = transformation.inPreformattedBlock\n    context.previousLeft = transformation.left\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    var value = '    '\n\n    transformation.left += value\n\n    if (transformation.atParagraph) {\n      transformation.append(value)\n    } else {\n      transformation.appendParagraph()\n    }\n\n    return true\n  }\n\n})\n\nexports.PreformattedPlugin = PreformattedPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar assign = require('lodash.assign')\nvar forOwn = require('lodash.forown')\nvar Oopsy = require('oopsy')\n\n/**\n * A preset of plugins usually grouped for a specific purpose.\n *\n * @public\n * @constructor Preset\n * @extends {Oopsy}\n */\nvar Preset = Oopsy.extend(function() {\n  /**\n   * The plugins for this {@link Preset}.\n   *\n   * @private\n   * @type {Object<string, Plugin>}\n   */\n  this._plugins = {}\n}, {\n\n  /**\n   * Sets the specified <code>plugin</code> for the <code>tags</code> provided.\n   *\n   * <code>tags</code> can be an array of tag names or a single string containing white-space separated tag names.\n   *\n   * @param {string|string[]} tags - the tag names to which <code>plugin</code> will be registered\n   * @param {Plugin} plugin - the {@link Plugin} to be registered against <code>tags</code>\n   * @return {Preset} A reference to this {@link Preset} for chaining purposes.\n   * @public\n   */\n  set: function(tags, plugin) {\n    if (typeof tags === 'string') {\n      tags = tags.trim().split(/\\s+/)\n    }\n\n    for (var i = 0; i < tags.length; i++) {\n      this._plugins[tags[i].toLowerCase()] = plugin\n    }\n\n    return this\n  },\n\n  /**\n   * Sets all of the specified <code>plugins</code> to be registered against their mapped tag names.\n   *\n   * @param {Object<string, Plugin>} plugins - a <code>Map</code> of plugins and tag names to which they are\n   * to be registered\n   * @return {Preset} A reference to this {@link Preset} for chaining purposes.\n   * @public\n   */\n  setAll: function(plugins) {\n    var that = this\n\n    forOwn(plugins, function(plugin, tag) {\n      that._plugins[tag.toLowerCase()] = plugin\n    })\n\n    return this\n  }\n\n})\n\nObject.defineProperty(Preset.prototype, 'plugins', {\n  get: function() {\n    return assign({}, this._plugins)\n  }\n})\n\nexports.Preset = Preset\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs as quoted text.\n *\n * @public\n * @constructor QuotePlugin\n * @extends {Plugin}\n */\nvar QuotePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    transformation.output('\"')\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    transformation.output('\"')\n\n    transformation.atNoWhiteSpace = true\n\n    return true\n  }\n\n})\n\nexports.QuotePlugin = QuotePlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Plugin = require('../plugin').Plugin\n\n/**\n * A {@link Plugin} which outputs an unordered list.\n *\n * @public\n * @constructor UnorderedListPlugin\n * @extends {Plugin}\n */\nvar UnorderedListPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(transformation, context) {\n    transformation.inOrderedList = context.previousInOrderedList\n    transformation.listIndex = context.previousListIndex\n    transformation.listDepth--\n  },\n\n  /**\n   * @override\n   */\n  before: function(transformation, context) {\n    context.previousInOrderedList = transformation.inOrderedList\n    context.previousListIndex = transformation.listIndex\n  },\n\n  /**\n   * @override\n   */\n  transform: function(transformation, context) {\n    if (transformation.listDepth === 0) {\n      transformation.appendParagraph()\n    }\n\n    transformation.inOrderedList = false\n    transformation.listIndex = 1\n    transformation.listDepth++\n\n    return true\n  }\n\n})\n\nexports.UnorderedListPlugin = UnorderedListPlugin\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar AnchorPlugin = require('../predefined/anchor').AnchorPlugin\nvar BlockQuotePlugin = require('../predefined/block-quote').BlockQuotePlugin\nvar BreakPlugin = require('../predefined/break').BreakPlugin\nvar CodePlugin = require('../predefined/code').CodePlugin\nvar DefinitionTermPlugin = require('../predefined/definition-term').DefinitionTermPlugin\nvar DetailsPlugin = require('../predefined/details').DetailsPlugin\nvar EmphasisPlugin = require('../predefined/emphasis').EmphasisPlugin\nvar EmptyPlugin = require('../predefined/empty').EmptyPlugin\nvar HeadingPlugin = require('../predefined/heading').HeadingPlugin\nvar HorizontalRulePlugin = require('../predefined/horizontal-rule').HorizontalRulePlugin\nvar ImagePlugin = require('../predefined/image').ImagePlugin\nvar ListItemPlugin = require('../predefined/list-item').ListItemPlugin\nvar OrderedListPlugin = require('../predefined/ordered-list').OrderedListPlugin\nvar ParagraphPlugin = require('../predefined/paragraph').ParagraphPlugin\nvar PreformattedPlugin = require('../predefined/preformatted').PreformattedPlugin\nvar Preset = require('./preset').Preset\nvar QuotePlugin = require('../predefined/quote').QuotePlugin\nvar StrongPlugin = require('../predefined/strong').StrongPlugin\nvar UnorderedListPlugin = require('../predefined/unordered-list').UnorderedListPlugin\n\n/**\n * A default preset containing all of the predefined plugins.\n *\n * @public\n * @constructor DefaultPreset\n * @extends {Preset}\n */\nvar DefaultPreset = Preset.extend(function() {\n  DefaultPreset.super_.call(this)\n\n  this.set([ 'a' ], new AnchorPlugin())\n  this.set([\n    'blockquote',\n    'dd'\n  ], new BlockQuotePlugin())\n  this.set([ 'br' ], new BreakPlugin())\n  this.set([\n    'code',\n    'kbd',\n    'samp'\n  ], new CodePlugin())\n  this.set([ 'dt' ], new DefinitionTermPlugin())\n  this.set([ 'details' ], new DetailsPlugin())\n  this.set([\n    'cite',\n    'dfn',\n    'em',\n    'i',\n    'u',\n    'var'\n  ], new EmphasisPlugin())\n  this.set([\n    'applet',\n    'area',\n    'audio',\n    'button',\n    'canvas',\n    'datalist',\n    'embed',\n    'head',\n    'input',\n    'map',\n    'menu',\n    'meter',\n    'noframes',\n    'noscript',\n    'object',\n    'optgroup',\n    'option',\n    'param',\n    'progress',\n    'rp',\n    'rt',\n    'ruby',\n    'script',\n    'select',\n    'style',\n    'textarea',\n    'title',\n    'video'\n  ], new EmptyPlugin())\n  this.set([\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6'\n  ], new HeadingPlugin())\n  this.set([ 'hr' ], new HorizontalRulePlugin())\n  this.set([ 'img' ], new ImagePlugin())\n  this.set([ 'li' ], new ListItemPlugin())\n  this.set([ 'ol' ], new OrderedListPlugin())\n  this.set([\n    'address',\n    'article',\n    'aside',\n    'div',\n    'fieldset',\n    'footer',\n    'header',\n    'nav',\n    'p',\n    'section'\n  ], new ParagraphPlugin())\n  this.set([ 'pre' ], new PreformattedPlugin())\n  this.set([ 'q' ], new QuotePlugin())\n  this.set([\n    'b',\n    'strong'\n  ], new StrongPlugin())\n  this.set([ 'ul' ], new UnorderedListPlugin())\n})\n\nexports.DefaultPreset = DefaultPreset\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar forOwn = require('lodash.forown')\nvar Oopsy = require('oopsy')\n\n/**\n * Contains contextual information for a single transformation process.\n *\n * @param {Transformer} transformer - the {@link Transformer} responsible for this transformation\n * @param {Transformation~Options} options - the options to be used\n * @public\n * @constructor Transformation\n * @extends {Oopsy}\n */\nvar Transformation = Oopsy.extend(function(transformer, options) {\n  /**\n   * The {@link Transformation} responsible for this {@link Transformation}.\n   *\n   * @public\n   * @type {Transformer}\n   */\n  this.transformer = transformer\n\n  /**\n   * The options for this {@link Transformation}.\n   *\n   * @public\n   * @type {Transformation~Options}\n   */\n  this.options = options\n\n  /**\n   * Indicates whether the buffer is at the start of the current line.\n   *\n   * @public\n   * @type {boolean}\n   */\n  this.atLeft = true\n\n  /**\n   * Indicates whether any white space should be removed from the start of the next output.\n   *\n   * @public\n   * @type {boolean}\n   */\n  this.atNoWhiteSpace = true\n\n  /**\n   * Indicates whether the buffer is at the start of a paragraph.\n   *\n   * @public\n   * @type {boolean}\n   */\n  this.atParagraph = true\n\n  /**\n   * The transformation output buffer to which the Markdown will be written.\n   *\n   * @public\n   * @type {string}\n   */\n  this.buffer = ''\n\n  /**\n   * The context for this {@link Transformation}.\n   *\n   * @public\n   * @type {Object<string, *>}\n   */\n  this.context = {}\n\n  /**\n   * Indicates whether the buffer is currently within a code block.\n   *\n   * @public\n   * @type {boolean}\n   */\n  this.inCodeBlock = false\n\n  /**\n   * Indicates whether the buffer is currently within an ordered list.\n   *\n   * @public\n   * @type {boolean}\n   */\n  this.inOrderedList = false\n\n  /**\n   * Indicates whether the buffer is currently within a preformatted block.\n   *\n   * @public\n   * @type {boolean}\n   */\n  this.inPreformattedBlock = false\n\n  /**\n   * The last string to be output next to the buffer.\n   *\n   * @public\n   * @type {string}\n   */\n  this.last = null\n\n  /**\n   * The start of the current line.\n   *\n   * @public\n   * @type {string}\n   */\n  this.left = '\\n'\n\n  /**\n   * The depth of nested lists.\n   *\n   * @public\n   * @type {number}\n   */\n  this.listDepth = 0\n\n  /**\n   * The one-based index for the current list item within the current list.\n   *\n   * @public\n   * @type {number}\n   */\n  this.listIndex = 1\n\n  /**\n   * The current document for this {@link Transformation}.\n   *\n   * This may not be the same document as is associated with the {@link Transformer} as this document may be nested\n   * (e.g. a frame).\n   *\n   * @private\n   * @type {HTMLDocument}\n   */\n  this._document = transformer.document\n\n  /**\n   * The current element for this {@link Transformation}.\n   *\n   * @private\n   * @type {Element}\n   */\n  this._element = null\n\n  /**\n   * The name of the tag for the current element for this {@link Transformation}.\n   *\n   * This will be the lower case tag name.\n   *\n   * @private\n   * @type {string}\n   */\n  this._tagName = null\n\n  /**\n   * The current window for this {@link Transformation}.\n   *\n   * This may not be the same window as is associated with the {@link Transformer} as this window may be nested (e.g. a\n   * frame).\n   *\n   * @private\n   * @type {Window}\n   */\n  this._window = transformer.window\n}, {\n\n  /**\n   * Appends the last output string to the buffer and then queues the specified <code>string</code> to be output.\n   *\n   * @param {string} string - the string to be appended\n   * @return {Transformation} A reference to this {@link Transformation} for chaining purposes.\n   * @public\n   */\n  append: function(string) {\n    if (this.last != null) {\n      this.buffer += this.last\n    }\n\n    this.last = string\n\n    return this\n  },\n\n  /**\n   * Appends a paragraph to the output buffer.\n   *\n   * @return {Transformation} A reference to this {@link Transformation} for chaining purposes.\n   * @public\n   */\n  appendParagraph: function() {\n    if (this.atParagraph) {\n      return this\n    }\n\n    if (!this.atLeft) {\n      this.append(this.left)\n\n      this.atLeft = true\n    }\n\n    this.append(this.left)\n\n    this.atNoWhiteSpace = true\n    this.atParagraph = true\n\n    return this\n  },\n\n  /**\n   * Outputs the specified <code>string</code> to the buffer.\n   *\n   * Optionally, <code>string</code> can be \"cleaned\" before being output. Doing so will replace any certain special\n   * characters as well as some white space.\n   *\n   * @param {string} string - the string to be output\n   * @param {boolean} [clean=false] - <code>true</code> to clean <code>string</code>; otherwise <code>false</code>\n   * @return {Transformation} A reference to this {@link Transformation} for chaining purposes.\n   * @public\n   */\n  output: function(string, clean) {\n    if (!string) {\n      return this\n    }\n\n    string = string.replace(/\\r\\n/g, '\\n')\n\n    if (clean) {\n      string = string.replace(/\\n([ \\t]*\\n)+/g, '\\n')\n        .replace(/\\n[ \\t]+/g, '\\n')\n        .replace(/[ \\t]+/g, ' ')\n\n      forOwn(Transformation.replacements, function(value, key) {\n        string = string.replace(Transformation.replacementsRegExp[key], value)\n      })\n    }\n\n    if (!this.inPreformattedBlock) {\n      if (this.atNoWhiteSpace) {\n        string = string.replace(/^[ \\t\\n]+/, '')\n      } else if (/^[ \\t]*\\n/.test(string)) {\n        string = string.replace(/^[ \\t\\n]+/, '\\n')\n      } else {\n        string = string.replace(/^[ \\t]+/, ' ')\n      }\n    }\n\n    if (!string) {\n      return this\n    }\n\n    this.atLeft = /\\n$/.test(string)\n    this.atNoWhiteSpace = /[ \\t\\n]$/.test(string)\n    this.atParagraph = /\\n{2}$/.test(string)\n\n    return this.append(string.replace(/\\n/g, this.left))\n  },\n\n  /**\n   * Replaces the start of the current line with the <code>string</code> provided.\n   *\n   * @param {string} string - the string to replace the start of the current line\n   * @return {Transformation} A reference to this {@link Transformation} for chaining purposes.\n   * @public\n   */\n  replaceLeft: function(string) {\n    if (!this.atLeft) {\n      this.append(this.left.replace(/[ ]{2,4}$/, string))\n\n      this.atLeft = true\n      this.atNoWhiteSpace = true\n      this.atParagraph = true\n    } else if (this.last) {\n      this.last = this.last.replace(/[ ]{2,4}$/, string)\n    }\n\n    return this\n  }\n\n}, {\n\n  /**\n   * A map of special characters and their replacements.\n   *\n   * @public\n   * @static\n   * @type {Object<string, string>}\n   */\n  replacements: {\n    '\\\\\\\\': '\\\\\\\\',\n    '\\\\[': '\\\\[',\n    '\\\\]': '\\\\]',\n    '>': '\\\\>',\n    '_': '\\\\_',\n    '\\\\*': '\\\\*',\n    '`': '\\\\`',\n    '#': '\\\\#',\n    '([0-9])\\\\.(\\\\s|$)': '$1\\\\.$2',\n    '\\u00a9': '(c)',\n    '\\u00ae': '(r)',\n    '\\u2122': '(tm)',\n    '\\u00a0': ' ',\n    '\\u00b7': '\\\\*',\n    '\\u2002': ' ',\n    '\\u2003': ' ',\n    '\\u2009': ' ',\n    '\\u2018': '\\'',\n    '\\u2019': '\\'',\n    '\\u201c': '\"',\n    '\\u201d': '\"',\n    '\\u2026': '...',\n    '\\u2013': '--',\n    '\\u2014': '---'\n  },\n\n  /**\n   * A map of special characters and the regular expression used to identify them.\n   *\n   * @public\n   * @static\n   * @type {Object<string, RegExp>}\n   */\n  replacementsRegExp: {}\n\n})\n\nObject.defineProperties(Transformation.prototype, {\n  document: {\n    get: function() {\n      return this._document\n    }\n  },\n  element: {\n    get: function() {\n      return this._element\n    },\n    set: function(value) {\n      this._element = value\n      this._tagName = value && value.tagName ? value.tagName.toLowerCase() : null\n    }\n  },\n  tagName: {\n    get: function() {\n      return this._tagName\n    }\n  },\n  window: {\n    get: function() {\n      return this._window\n    },\n    set: function(value) {\n      this._window = value\n      this._document = value ? value.document : null\n    }\n  }\n})\n\nforOwn(Transformation.replacements, function(value, key) {\n  Transformation.replacementsRegExp[key] = new RegExp(key, 'g')\n})\n\nexports.Transformation = Transformation\n\n/**\n * The options for {@link Transformation}.\n *\n * @typedef {Object} Transformation~Options\n * @property {boolean} [absolute=false] - <code>true</code> if absolute URLs should be used for anchors/images;\n * otherwise <code>false</code>.\n * @property {string} [baseUri] - the base URI for the window\n * @property {boolean} [inline=false] - <code>true</code> if anchor/image URLs are to be inserted inline; otherwise\n * <code>false</code>.\n */\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar forOwn = require('lodash.forown')\nvar Oopsy = require('oopsy')\n\nvar Transformation = require('./transformation').Transformation\n\n/**\n * Transforms an HTML string or DOM element into Markdown.\n *\n * @param {Window} window - the <code>Window</code> to be used\n * @param {Object<string, Plugin>} plugins - the plugins to be used\n * @public\n * @constructor Transformer\n * @extends {Oopsy}\n */\nvar Transformer = Oopsy.extend(function(window, plugins) {\n  /**\n   * The <code>Window</code> for this {@link Transformer}.\n   *\n   * @public\n   * @type {Window}\n   */\n  this.window = window\n\n  /**\n   * The <code>HTMLDocument</code> for this {@link Transformer}.\n   *\n   * @public\n   * @type {HTMLDocument}\n   */\n  this.document = window.document\n\n  /**\n   * The plugins for this {@link Transformer}.\n   *\n   * @public\n   * @type {Object<string, Plugin>}\n   */\n  this.plugins = plugins\n}, {\n\n  /**\n   * Transforms the specified <code>html</code> into Markdown using the <code>options</code> provided.\n   *\n   * <code>html</code> can either be an HTML string or a DOM element whose HTML contents are to be transformed into\n   * Markdown.\n   *\n   * @param {Element|string} html - the HTML (or element whose inner HTML) to be transformed into Markdown\n   * @param {Transformation~Options} options - the options to be used\n   * @return {string} The transformed Markdown.\n   * @public\n   */\n  transform: function(html, options) {\n    if (!html) {\n      return ''\n    }\n\n    var root\n    if (typeof html === 'string') {\n      root = this.document.createElement('div')\n      root.innerHTML = html\n    } else {\n      root = html\n    }\n\n    var transformation = new Transformation(this, options)\n\n    forOwn(this.plugins, function(plugin) {\n      plugin.beforeAll(transformation)\n    })\n\n    this.transformElement(root, transformation)\n\n    forOwn(this.plugins, function(plugin) {\n      plugin.afterAll(transformation)\n    })\n\n    return transformation.append('').buffer.trim()\n  },\n\n  /**\n   * Transforms the specified <code>element</code> and it's children into Markdown using the <code>transformation</code>\n   * provided.\n   *\n   * Nothing happens if <code>element</code> is <code>null</code> or is invisible (simplified detection used).\n   *\n   * @param {Element} element - the element to be transformed into Markdown as well as it's children\n   * @param {Transformation} transformation - the current {@link Transformation}\n   * @return {void}\n   * @public\n   */\n  transformElement: function(element, transformation) {\n    if (!element) {\n      return\n    }\n\n    var context\n    var i\n    var plugin\n    var transformChildren\n    var value\n\n    if (element.nodeType === this.window.Node.ELEMENT_NODE) {\n      if (!this._isVisible(element)) {\n        return\n      }\n\n      transformation.element = element\n\n      context = {}\n      plugin = this.plugins[transformation.tagName]\n      transformChildren = true\n\n      if (plugin) {\n        plugin.before(transformation, context)\n        transformChildren = plugin.transform(transformation, context)\n      }\n\n      if (transformChildren) {\n        for (i = 0; i < element.childNodes.length; i++) {\n          this.transformElement(element.childNodes[i], transformation)\n        }\n      }\n\n      if (plugin) {\n        plugin.after(transformation, context)\n      }\n    } else if (element.nodeType === this.window.Node.TEXT_NODE) {\n      value = element.nodeValue || ''\n\n      if (transformation.inPreformattedBlock) {\n        transformation.output(value)\n      } else if (transformation.inCodeBlock) {\n        transformation.output(value.replace(/`/g, '\\\\`'))\n      } else {\n        transformation.output(value, true)\n      }\n    }\n  },\n\n  /**\n   * Checks whether the specified <code>element</code> is currently visible.\n   *\n   * This is not a very sophisticated check and could easily be mistaken, but it should catch a lot of the most simple\n   * cases.\n   *\n   * @param {Element} element - the element whose visibility is to be checked\n   * @return {boolean} <code>true</code> if <code>element</code> is visible; otherwise <code>false</code>.\n   * @private\n   */\n  _isVisible: function(element) {\n    var style = this.window.getComputedStyle(element)\n\n    return style.getPropertyValue('display') !== 'none' && style.getPropertyValue('visibility') !== 'hidden'\n  }\n\n})\n\nexports.Transformer = Transformer\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar assign = require('lodash.assign')\nvar forOwn = require('lodash.forown')\nvar Oopsy = require('oopsy')\n\nvar DefaultPreset = require('./plugin/preset/default').DefaultPreset\nvar Transformer = require('./transformer').Transformer\n\n/**\n * An HTML to Markdown transformation library that supports HTML strings and DOM elements.\n *\n * @param {WindowService} windowService - the {@link WindowService} to be used for HTML to Markdown transformation\n * @public\n * @constructor Europa\n * @extends {Oopsy}\n */\nvar Europa = Oopsy.extend(function(windowService) {\n  /**\n   * The {@link WindowService} for this {@link Europa} instance.\n   *\n   * If no <code>Window</code> has been allocated, one is retrieved from the {@link WindowService} and allocated.\n   *\n   * @private\n   * @type {WindowService}\n   */\n  this._windowService = windowService\n\n  /**\n   * The <code>Window</code> to be used for HTML to Markdown transformation.\n   *\n   * @private\n   * @type {Window}\n   */\n  this._window = null\n\n  /**\n   * The plugins for this {@link Europa} instance.\n   *\n   * @private\n   * @type {Object<string, Plugin>}\n   */\n  this._plugins = {}\n\n  this.registerPreset(new DefaultPreset())\n}, {\n\n  /**\n   * Destroys the <code>Window</code> used by this {@link Europa} instance.\n   *\n   * This allows closeable {@link WindowService} implementations to close the <code>Window</code> and free up resources.\n   * However, this instance can and will simply retrieve another <code>Window</code> from the {@link WindowService} the\n   * next time it is required.\n   *\n   * @return {Europa} A reference to this {@link Europa} for chaining purposes.\n   * @public\n   */\n  destroy: function() {\n    if (this._window) {\n      this._windowService.closeWindow(this._window)\n      this._window = null\n    }\n\n    return this\n  },\n\n  /**\n   * Registers the specified <code>plugin</code> for the <code>tags</code> provided.\n   *\n   * <code>tags</code> can be an array of tag names or a single string containing white-space separated tag names.\n   *\n   * @param {string|string[]} tags - the tag names for which <code>plugin</code> is to be registered\n   * @param {Plugin} plugin - the {@link Plugin} to be registered\n   * @return {Europa} A reference to this {@link Europa} for chaining purposes.\n   * @public\n   */\n  register: function(tags, plugin) {\n    if (typeof tags === 'string') {\n      tags = tags.trim().split(/\\s+/)\n    }\n\n    for (var i = 0; i < tags.length; i++) {\n      this._plugins[tags[i].toLowerCase()] = plugin\n    }\n\n    return this\n  },\n\n  /**\n   * Registers all of the plugins within the specified <code>preset</code>.\n   *\n   * @param {Preset} preset - the {@link Preset} whose plugins are to be registered\n   * @return {Europa} A reference to this {@link Europa} for chaining purposes.\n   * @public\n   */\n  registerPreset: function(preset) {\n    var plugins = this._plugins\n\n    forOwn(preset.plugins, function(plugin, tag) {\n      plugins[tag] = plugin\n    })\n\n    return this\n  },\n\n  /**\n   * Transforms the specified <code>html</code> into Markdown using the <code>options</code> provided.\n   *\n   * <code>html</code> can either be an HTML string or a DOM element whose HTML contents are to be transformed into\n   * Markdown.\n   *\n   * @param {Element|string} html - the HTML (or element whose inner HTML) to be transformed into Markdown\n   * @param {Transformation~Options} [options] - the options to be used\n   * @return {string} The transformed Markdown.\n   * @public\n   */\n  transform: function(html, options) {\n    var transformer = new Transformer(this.window, this.plugins)\n\n    options = this._createTransformationOptions(options)\n\n    return transformer.transform(html, options)\n  },\n\n  /**\n   * Creates the options, including their default values, for the {@link Transformer#transform} method based on the\n   * <code>options</code> provided.\n   *\n   * @param {Transformation~Options} [options] - the options that were passed in\n   * @return {Transformation~Options} The complete options.\n   * @private\n   */\n  _createTransformationOptions: function(options) {\n    return assign({\n      absolute: false,\n      baseUri: this._windowService.getBaseUri(this.window),\n      inline: false\n    }, options)\n  }\n\n})\n\nObject.defineProperties(Europa.prototype, {\n  plugins: {\n    get: function() {\n      return assign({}, this._plugins)\n    }\n  },\n  window: {\n    get: function() {\n      if (this._window == null) {\n        this._window = this._windowService.getWindow()\n      }\n\n      return this._window\n    }\n  },\n  windowService: {\n    get: function() {\n      return this._windowService\n    }\n  }\n})\n\nexports.Europa = Europa\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Europa = require('./europa').Europa\n\nmodule.exports = Europa\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Oopsy = require('oopsy')\n\nvar Utilities = require('../utilities').Utilities\n\n/**\n * A service used to retrieve the <code>Window</code> object for transforming HTML to Markdown and, optionally, to close\n * it upon destruction of the {@link Europa} instance. This can be useful to free up resources as/when required in an\n * artificial browser environment.\n *\n * @public\n * @constructor WindowService\n * @extends {Oopsy}\n */\nvar WindowService = Oopsy.extend({\n\n  /**\n   * Closes the specified <code>window</code> but only if this {@link WindowService} is closeable.\n   *\n   * @param {Window} window - the <code>Window</code> to be closed\n   * @return {void}\n   * @public\n   */\n  closeWindow: function(window) {\n    if (this.isCloseable(window)) {\n      window.close()\n    }\n  },\n\n  /**\n   * Returns the base URI for the specified <code>window</code>.\n   *\n   * Implementations <b>must</b> override this method.\n   *\n   * @param {Window} window - the <code>Window</code> for which the base URI is to be returned\n   * @return {string} The base URI for <code>window</code>.\n   * @public\n   * @abstract\n   */\n  getBaseUri: function(window) {\n    Utilities.throwUnimplemented('WindowService', 'getBaseUri')\n  },\n\n  /**\n   * Returns a <code>Window</code> to be used for transforming HTML to Markdown.\n   *\n   * Implementations <b>must</b> override this method.\n   *\n   * @return {Window} The <code>Window</code>.\n   * @public\n   * @abstract\n   */\n  getWindow: function() {\n    Utilities.throwUnimplemented('WindowService', 'getWindow')\n  },\n\n  /**\n   * Returns whether the specified <code>window</code> which was retrieved by this {@link WindowService} is closeable.\n   *\n   * @param {Window} window - the <code>Window</code> to be checked\n   * @return {boolean} <code>true</code> if <code>window</code> is closeable; otherwise <code>false</code>.\n   * @public\n   */\n  isCloseable: function(window) {\n    return false\n  }\n\n})\n\nexports.WindowService = WindowService\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar WindowService = require('europa-core/lib/service/window-service').WindowService\n\n/**\n * A very simplistic implementation of {@link WindowService} that returns the global <code>Window</code> object to be\n * used for transforming HTML into Markdown.\n *\n * @public\n * @constructor NativeWindowService\n * @extends {WindowService}\n */\nvar NativeWindowService = WindowService.extend({\n\n  /**\n   * @override\n   */\n  getBaseUri: function(window) {\n    return window.document.baseURI\n  },\n\n  /**\n   * @override\n   */\n  getWindow: function() {\n    return window\n  }\n\n})\n\nexports.NativeWindowService = NativeWindowService\n","/*\n * Copyright (C) 2016 Alasdair Mercer, Skelp\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict'\n\nvar Europa = require('europa-core')\n\nvar NativeWindowService = require('./service/native-window-service').NativeWindowService\n\nmodule.exports = new Europa(new NativeWindowService())\n"],"names":["apply","func","thisArg","args","length","call","baseTimes","n","iteratee","index","result","Array","overArg","transform","arg","arrayLikeKeys","value","inherited","isArray","isArguments","String","skipIndexes","key","hasOwnProperty","isIndex","push","assignValue","object","objValue","eq","undefined","baseKeys","isPrototype","nativeKeys","Object","baseRest","start","nativeMax","arguments","array","otherArgs","this","copyObject","source","props","customizer","newValue","createAssigner","assigner","sources","guard","isIterateeCall","MAX_SAFE_INTEGER","reIsUint","test","isObject","type","isArrayLike","Ctor","constructor","proto","prototype","objectProto","other","isArrayLikeObject","propertyIsEnumerable","objectToString","argsTag","isLength","isFunction","isObjectLike","tag","funcTag","genTag","keys","baseForOwn","baseFor","createBaseFor","fromRight","keysFunc","iterable","forOwn","identity","toString","Math","max","nonEnumShadows","valueOf","assign","global","factory","exports","module","define","amd","Oopsy","extend","own","target","slice","property","i","create","properties","Constructor","statics","superConstructor","super_","oopsy","require$$0","Plugin","after","transformation","context","afterAll","before","beforeAll","AnchorPlugin","output","anchors","append","anchorMap","element","options","href","absolute","getAttribute","title","inline","atNoWhiteSpace","BlockQuotePlugin","atLeft","atParagraph","left","previousLeft","appendParagraph","BreakPlugin","CodePlugin","skipped","inCodeBlock","previousInCodeBlock","inPreformattedBlock","StrongPlugin","DefinitionTermPlugin","DetailsPlugin","hasAttribute","summary","querySelector","transformer","transformElement","EmphasisPlugin","EmptyPlugin","HeadingPlugin","level","parseInt","tagName","match","heading","HorizontalRulePlugin","ImagePlugin","images","imageMap","src","alternativeText","Utilities","leftPad","string","times","padding","throwUnimplemented","className","methodName","Error","require$$1","ListItemPlugin","inOrderedList","listIndex","last","replace","listDepth","OrderedListPlugin","previousInOrderedList","previousListIndex","ParagraphPlugin","PreformattedPlugin","previousInPreformattedBlock","require$$2","Preset","_plugins","set","tags","plugin","trim","split","toLowerCase","setAll","plugins","that","defineProperty","get","QuotePlugin","UnorderedListPlugin","require$$18","require$$17","require$$16","require$$15","require$$14","require$$13","require$$12","require$$11","require$$10","require$$9","require$$8","require$$7","require$$6","require$$5","require$$4","require$$3","DefaultPreset","Transformation","buffer","_document","document","_element","_tagName","_window","window","clean","replacements","replacementsRegExp","replaceLeft","\\\\","\\[","\\]",">","_","\\*","`","#","([0-9])\\.(\\s|$)","","","","","","","","","","","","","","","","defineProperties","RegExp","Transformer","html","root","createElement","innerHTML","transformChildren","nodeType","Node","ELEMENT_NODE","_isVisible","childNodes","TEXT_NODE","nodeValue","style","getComputedStyle","getPropertyValue","Europa","windowService","_windowService","registerPreset","destroy","closeWindow","register","preset","_createTransformationOptions","baseUri","getBaseUri","getWindow","WindowService","isCloseable","close","NativeWindowService","baseURI"],"mappings":"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"}