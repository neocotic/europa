{"version":3,"file":"europa.js","sources":["../node_modules/nevis/src/extend.js","../node_modules/nevis/src/nevis.js","../node_modules/nevis/lite.js","../node_modules/europa-core/src/util/Utilities.js","../node_modules/europa-core/src/Conversion.js","../node_modules/europa-core/src/util/DOMUtilities.js","../node_modules/europa-core/src/option/Option.js","../node_modules/europa-core/src/option/OptionParser.js","../node_modules/europa-core/src/plugin/Plugin.js","../node_modules/europa-core/src/service/ServiceManager.js","../node_modules/europa-core/src/Europa.js","../node_modules/europa-core/src/plugin/predefined/AnchorPlugin.js","../node_modules/europa-core/src/plugin/predefined/BlockQuotePlugin.js","../node_modules/europa-core/src/plugin/predefined/BreakPlugin.js","../node_modules/europa-core/src/plugin/predefined/CodePlugin.js","../node_modules/europa-core/src/plugin/predefined/DefinitionTermPlugin.js","../node_modules/europa-core/src/plugin/predefined/DetailsPlugin.js","../node_modules/europa-core/src/plugin/predefined/EmphasisPlugin.js","../node_modules/europa-core/src/plugin/predefined/EmptyPlugin.js","../node_modules/europa-core/src/plugin/predefined/FramePlugin.js","../node_modules/europa-core/src/plugin/predefined/HeadingPlugin.js","../node_modules/europa-core/src/plugin/predefined/HorizontalRulePlugin.js","../node_modules/europa-core/src/plugin/predefined/ImagePlugin.js","../node_modules/europa-core/src/plugin/predefined/ListItemPlugin.js","../node_modules/europa-core/src/plugin/predefined/OrderedListPlugin.js","../node_modules/europa-core/src/plugin/predefined/ParagraphPlugin.js","../node_modules/europa-core/src/plugin/predefined/PreformattedPlugin.js","../node_modules/europa-core/src/plugin/predefined/QuotePlugin.js","../node_modules/europa-core/src/plugin/predefined/StrongPlugin.js","../node_modules/europa-core/src/plugin/predefined/UnorderedListPlugin.js","../node_modules/europa-core/index.js","../node_modules/europa-core/src/service/Service.js","../node_modules/europa-core/src/service/window/WindowService.js","../src/service/window/BrowserWindowService.js","../src/Europa.js"],"sourcesContent":["/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\n/**\n * A bare-bones constructor for surrogate prototype swapping.\n *\n * @private\n * @constructor\n */\nvar Constructor = /* istanbul ignore next */ function() {};\n/**\n * A reference to <code>Object.prototype.hasOwnProperty</code>.\n *\n * @private\n * @type {Function}\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * A reference to <code>Array.prototype.slice</code>.\n *\n * @private\n * @type {Function}\n */\nvar slice = Array.prototype.slice;\n\n/**\n * Creates an object which inherits the given <code>prototype</code>.\n *\n * Optionally, the created object can be extended further with the specified <code>properties</code>.\n *\n * @param {Object} prototype - the prototype to be inherited by the created object\n * @param {Object} [properties] - the optional properties to be extended by the created object\n * @return {Object} The newly created object.\n * @private\n */\nfunction createObject(prototype, properties) {\n  var result;\n  /* istanbul ignore next */\n  if (typeof Object.create === 'function') {\n    result = Object.create(prototype);\n  } else {\n    Constructor.prototype = prototype;\n    result = new Constructor();\n    Constructor.prototype = null;\n  }\n\n  if (properties) {\n    extendObject(true, result, properties);\n  }\n\n  return result;\n}\n\n/**\n * Extends the constructor to which this method is associated with the <code>prototype</code> and/or\n * <code>statics</code> provided.\n *\n * If <code>name</code> is provided, it will be used as the class name and can be accessed via a special\n * <code>class_</code> property on the child constructor, otherwise the class name of the super constructor will be used\n * instead. The class name may also be used string representation for instances of the child constructor (via\n * <code>toString</code>), but this is not applicable to the <i>lite</i> version of Nevis.\n *\n * If <code>constructor</code> is provided, it will be used as the constructor for the child, otherwise a simple\n * constructor which only calls the super constructor will be used instead.\n *\n * The super constructor can be accessed via a special <code>super_</code> property on the child constructor.\n *\n * @param {string} [name=this.class_] - the class name to be used for the child constructor\n * @param {Function} [constructor] - the constructor for the child\n * @param {Object} [prototype] - the prototype properties to be defined for the child\n * @param {Object} [statics] - the static properties to be defined for the child\n * @return {Function} The child <code>constructor</code> provided or the one created if none was given.\n * @public\n */\nfunction extend(name, constructor, prototype, statics) {\n  var superConstructor = this;\n\n  if (typeof name !== 'string') {\n    statics = prototype;\n    prototype = constructor;\n    constructor = name;\n    name = null;\n  }\n\n  if (typeof constructor !== 'function') {\n    statics = prototype;\n    prototype = constructor;\n    constructor = function() {\n      return superConstructor.apply(this, arguments);\n    };\n  }\n\n  extendObject(false, constructor, superConstructor, statics);\n\n  constructor.prototype = createObject(superConstructor.prototype, prototype);\n  constructor.prototype.constructor = constructor;\n\n  constructor.class_ = name || superConstructor.class_;\n  constructor.super_ = superConstructor;\n\n  return constructor;\n}\n\n/**\n * Extends the specified <code>target</code> object with the properties in each of the <code>sources</code> provided.\n *\n * if any source is <code>null</code> it will be ignored.\n *\n * @param {boolean} own - <code>true</code> to only copy <b>own</b> properties from <code>sources</code> onto\n * <code>target</code>; otherwise <code>false</code>\n * @param {Object} target - the target object which should be extended\n * @param {...Object} [sources] - the source objects whose properties are to be copied onto <code>target</code>\n * @return {void}\n * @private\n */\nfunction extendObject(own, target, sources) {\n  sources = slice.call(arguments, 2);\n\n  var property;\n  var source;\n\n  for (var i = 0, length = sources.length; i < length; i++) {\n    source = sources[i];\n\n    for (property in source) {\n      if (!own || hasOwnProperty.call(source, property)) {\n        target[property] = source[property];\n      }\n    }\n  }\n}\n\nmodule.exports = extend;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar extend = require('./extend');\n\n/**\n * The base class from which all others should extend.\n *\n * @public\n * @constructor\n */\nfunction Nevis() {}\nNevis.class_ = 'Nevis';\nNevis.super_ = Object;\n\n/**\n * Extends the constructor to which this method is associated with the <code>prototype</code> and/or\n * <code>statics</code> provided.\n *\n * If <code>name</code> is provided, it will be used as the class name and can be accessed via a special\n * <code>class_</code> property on the child constructor, otherwise the class name of the super constructor will be used\n * instead. The class name may also be used string representation for instances of the child constructor (via\n * <code>toString</code>), but this is not applicable to the <i>lite</i> version of Nevis.\n *\n * If <code>constructor</code> is provided, it will be used as the constructor for the child, otherwise a simple\n * constructor which only calls the super constructor will be used instead.\n *\n * The super constructor can be accessed via a special <code>super_</code> property on the child constructor.\n *\n * @param {string} [name=this.class_] - the class name to be used for the child constructor\n * @param {Function} [constructor] - the constructor for the child\n * @param {Object} [prototype] - the prototype properties to be defined for the child\n * @param {Object} [statics] - the static properties to be defined for the child\n * @return {Function} The child <code>constructor</code> provided or the one created if none was given.\n * @public\n * @static\n * @memberof Nevis\n */\nNevis.extend = extend;\n\nmodule.exports = Nevis;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nmodule.exports = require('./src/nevis');\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\n/**\n * Contains utility methods that are useful throughout the library.\n *\n * @public\n * @class\n * @extends Nevis\n */\nvar Utilities = Nevis.extend(null, {\n\n  /**\n   * Iterates over own (not inherited) enumerable properties on the specified <code>object</code>.\n   *\n   * Nothing happens if <code>object</code> is <code>null</code>.\n   *\n   * @param {Object} object - the object whose own properties are to be iterated over\n   * @param {Utilities~ForOwnCallback} callback - the function to be called with the value and key for each own property\n   * on <code>object</code>\n   * @param {Object} [context] - the value to use <code>this</code> when executing <code>callback</code>\n   * @return {void}\n   * @public\n   * @static\n   * @memberof Utilities\n   */\n  forOwn: function(object, callback, context) {\n    if (!object) {\n      return;\n    }\n\n    for (var key in object) {\n      if (Utilities.hasOwn(object, key)) {\n        callback.call(context, object[key], key, object);\n      }\n    }\n  },\n\n  /**\n   * Returns whether the specified <code>object</code> has a property with the specified <code>name</code> as an own\n   * (not inherited) property.\n   *\n   * @param {Object} object - the object on which the property is to be checked\n   * @param {string} name - the name of the property to be checked\n   * @return {boolean} <code>true</code> if <code>object</code> has an own property with <code>name</code>.\n   * @public\n   * @static\n   * @memberof Utilities\n   */\n  hasOwn: function(object, name) {\n    return Object.prototype.hasOwnProperty.call(object, name);\n  },\n\n  /**\n   * Left pads the <code>string</code> provided with the given padding string for the specified number of\n   * <code>times</code>.\n   *\n   * @param {string} [string=\"\"] - the string to be padded\n   * @param {number} [times=0] - the number of times to pad <code>string</code>\n   * @param {string} [padding=\" \"] - the padding string\n   * @return {string} The padded <code>string</code>.\n   * @public\n   * @static\n   * @memberof Utilities\n   */\n  leftPad: function(string, times, padding) {\n    if (string == null) {\n      string = '';\n    }\n    if (times == null) {\n      times = 0;\n    }\n    if (padding == null) {\n      padding = ' ';\n    }\n    if (!padding) {\n      return string;\n    }\n\n    for (var i = 0; i < times; i++) {\n      string = padding + string;\n    }\n\n    return string;\n  }\n\n});\n\nmodule.exports = Utilities;\n\n/**\n * Called for each own enumerable property on <code>object</code>.\n *\n * @callback Utilities~ForOwnCallback\n * @param {*} value - the value of the property\n * @param {string} key - the name of the property\n * @param {Object} object - the object to which the property belongs\n * @return {void}\n */\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\nvar Utilities = require('./util/Utilities');\n\n/**\n * Contains contextual information for a single conversion process.\n *\n * @param {Europa} europa - the {@link Europa} instance responsible for this conversion\n * @param {Europa~Options} options - the options to be used\n * @public\n * @class\n * @extends Nevis\n */\nvar Conversion = Nevis.extend(function(europa, options) {\n  /**\n   * The {@link Europa} instance responsible for this {@link Conversion}.\n   *\n   * @public\n   * @type {Europa}\n   * @memberof Conversion#\n   */\n  this.europa = europa;\n\n  /**\n   * The options for this {@link Conversion}.\n   *\n   * @public\n   * @type {Europa~Options}\n   * @memberof Conversion#\n   */\n  this.options = options;\n\n  /**\n   * Whether the buffer is at the start of the current line.\n   *\n   * @public\n   * @type {boolean}\n   * @memberof Conversion#\n   */\n  this.atLeft = true;\n\n  /**\n   * Whether any white space should be removed from the start of the next output.\n   *\n   * @public\n   * @type {boolean}\n   * @memberof Conversion#\n   */\n  this.atNoWhiteSpace = true;\n\n  /**\n   * Whether the buffer is at the start of a paragraph.\n   *\n   * @public\n   * @type {boolean}\n   * @memberof Conversion#\n   */\n  this.atParagraph = true;\n\n  /**\n   * The conversion output buffer to which the Markdown will be written.\n   *\n   * @public\n   * @type {string}\n   * @memberof Conversion#\n   */\n  this.buffer = '';\n\n  /**\n   * The context for this {@link Conversion}.\n   *\n   * @public\n   * @type {Object.<string, *>}\n   * @memberof Conversion#\n   */\n  this.context = {};\n\n  /**\n   * Whether the buffer is currently within a code block.\n   *\n   * @public\n   * @type {boolean}\n   * @memberof Conversion#\n   */\n  this.inCodeBlock = false;\n\n  /**\n   * Whether the buffer is currently within an ordered list.\n   *\n   * @public\n   * @type {boolean}\n   * @memberof Conversion#\n   */\n  this.inOrderedList = false;\n\n  /**\n   * Whether the buffer is currently within a preformatted block.\n   *\n   * @public\n   * @type {boolean}\n   * @memberof Conversion#\n   */\n  this.inPreformattedBlock = false;\n\n  /**\n   * The last string to be output next to the buffer.\n   *\n   * @public\n   * @type {string}\n   * @memberof Conversion#\n   */\n  this.last = null;\n\n  /**\n   * The start of the current line.\n   *\n   * @public\n   * @type {string}\n   * @memberof Conversion#\n   */\n  this.left = '\\n';\n\n  /**\n   * The depth of nested lists.\n   *\n   * @public\n   * @type {number}\n   * @memberof Conversion#\n   */\n  this.listDepth = 0;\n\n  /**\n   * The one-based index for the current list item within the current list.\n   *\n   * @public\n   * @type {number}\n   * @memberof Conversion#\n   */\n  this.listIndex = 1;\n\n  this._document = europa.document;\n  this._element = null;\n  this._tagName = null;\n  this._window = europa.window;\n}, {\n\n  /**\n   * Appends the last output string to the buffer and then queues the specified <code>string</code> to be output.\n   *\n   * @param {string} string - the string to be appended\n   * @return {Conversion} A reference to this {@link Conversion} for chaining purposes.\n   * @public\n   * @memberof Conversion#\n   */\n  append: function(string) {\n    if (this.last != null) {\n      this.buffer += this.last;\n    }\n\n    this.last = string;\n\n    return this;\n  },\n\n  /**\n   * Appends a paragraph to the output buffer.\n   *\n   * @return {Conversion} A reference to this {@link Conversion} for chaining purposes.\n   * @public\n   * @memberof Conversion#\n   */\n  appendParagraph: function() {\n    if (this.atParagraph) {\n      return this;\n    }\n\n    if (!this.atLeft) {\n      this.append(this.left);\n\n      this.atLeft = true;\n    }\n\n    this.append(this.left);\n\n    this.atNoWhiteSpace = true;\n    this.atParagraph = true;\n\n    return this;\n  },\n\n  /**\n   * Outputs the specified <code>string</code> to the buffer.\n   *\n   * Optionally, <code>string</code> can be \"cleaned\" before being output. Doing so will replace any certain special\n   * characters as well as some white space.\n   *\n   * @param {string} string - the string to be output\n   * @param {boolean} [clean=false] - <code>true</code> to clean <code>string</code>; otherwise <code>false</code>\n   * @return {Conversion} A reference to this {@link Conversion} for chaining purposes.\n   * @public\n   * @memberof Conversion#\n   */\n  output: function(string, clean) {\n    if (!string) {\n      return this;\n    }\n\n    string = string.replace(/\\r\\n/g, '\\n');\n\n    if (clean) {\n      string = string.replace(/\\n([ \\t]*\\n)+/g, '\\n')\n        .replace(/\\n[ \\t]+/g, '\\n')\n        .replace(/[ \\t]+/g, ' ');\n\n      Utilities.forOwn(Conversion.replacements, function(value, key) {\n        string = string.replace(Conversion.replacementsRegExp[key], value);\n      });\n    }\n\n    if (!this.inPreformattedBlock) {\n      if (this.atNoWhiteSpace) {\n        string = string.replace(/^[ \\t\\n]+/, '');\n      } else if (/^[ \\t]*\\n/.test(string)) {\n        string = string.replace(/^[ \\t\\n]+/, '\\n');\n      } else {\n        string = string.replace(/^[ \\t]+/, ' ');\n      }\n    }\n\n    if (!string) {\n      return this;\n    }\n\n    this.atLeft = /\\n$/.test(string);\n    this.atNoWhiteSpace = /[ \\t\\n]$/.test(string);\n    this.atParagraph = /\\n{2}$/.test(string);\n\n    return this.append(string.replace(/\\n/g, this.left));\n  },\n\n  /**\n   * Replaces the start of the current line with the <code>string</code> provided.\n   *\n   * @param {string} string - the string to replace the start of the current line\n   * @return {Conversion} A reference to this {@link Conversion} for chaining purposes.\n   * @public\n   * @memberof Conversion#\n   */\n  replaceLeft: function(string) {\n    if (!this.atLeft) {\n      this.append(this.left.replace(/[ ]{2,4}$/, string));\n\n      this.atLeft = true;\n      this.atNoWhiteSpace = true;\n      this.atParagraph = true;\n    } else if (this.last) {\n      this.last = this.last.replace(/[ ]{2,4}$/, string);\n    }\n\n    return this;\n  }\n\n}, {\n\n  /**\n   * A map of special characters and their replacements.\n   *\n   * @public\n   * @static\n   * @type {Object.<string, string>}\n   * @memberof Conversion\n   */\n  replacements: {\n    '\\\\\\\\': '\\\\\\\\',\n    '\\\\[': '\\\\[',\n    '\\\\]': '\\\\]',\n    '>': '\\\\>',\n    '_': '\\\\_',\n    '\\\\*': '\\\\*',\n    '`': '\\\\`',\n    '#': '\\\\#',\n    '([0-9])\\\\.(\\\\s|$)': '$1\\\\.$2',\n    '\\u00a9': '(c)',\n    '\\u00ae': '(r)',\n    '\\u2122': '(tm)',\n    '\\u00a0': ' ',\n    '\\u00b7': '\\\\*',\n    '\\u2002': ' ',\n    '\\u2003': ' ',\n    '\\u2009': ' ',\n    '\\u2018': '\\'',\n    '\\u2019': '\\'',\n    '\\u201c': '\"',\n    '\\u201d': '\"',\n    '\\u2026': '...',\n    '\\u2013': '--',\n    '\\u2014': '---'\n  },\n\n  /**\n   * A map of special characters and the regular expression used to identify them.\n   *\n   * @public\n   * @static\n   * @type {Object.<string, RegExp>}\n   * @memberof Conversion\n   */\n  replacementsRegExp: {}\n\n});\n\nObject.defineProperties(Conversion.prototype, {\n\n  document: {\n    /**\n     * Returns the current document for this {@link Conversion}.\n     *\n     * This may not be the same document as is associated with the {@link Europa} instance as this document may be\n     * nested (e.g. a frame).\n     *\n     * @return {Document} The current document.\n     * @public\n     * @memberof Conversion#\n     * @alias document\n     */\n    get: function() {\n      return this._document;\n    }\n  },\n\n  element: {\n    /**\n     * Returns the current element for this {@link Conversion}.\n     *\n     * @return {Element} The current element.\n     * @public\n     * @memberof Conversion#\n     * @alias element\n     */\n    get: function() {\n      return this._element;\n    },\n\n    /**\n     * Sets the current element for this {@link Conversion} to <code>element</code>.\n     *\n     * @param {Element} element - the current element to be set\n     * @return {void}\n     * @public\n     * @memberof Conversion#\n     * @alias element\n     */\n    set: function(element) {\n      this._element = element;\n      this._tagName = element && element.tagName ? element.tagName.toLowerCase() : null;\n    }\n  },\n\n  tagName: {\n    /**\n     * Returns the name of the tag for the current element for this {@link Conversion}.\n     *\n     * The tag name will always be in lower case, when available.\n     *\n     * @return {string} The current element's tag name.\n     * @public\n     * @memberof Conversion#\n     * @alias tagName\n     */\n    get: function() {\n      return this._tagName;\n    }\n  },\n\n  window: {\n    /**\n     * Returns the current window for this {@link Conversion}.\n     *\n     * This may not be the same window as is associated with the {@link Europa} instance as this window may be nested\n     * (e.g. a frame).\n     *\n     * @return {Window} The current window.\n     * @public\n     * @memberof Conversion#\n     * @alias window\n     */\n    get: function() {\n      return this._window;\n    },\n\n    /**\n     * Sets the current window for this {@link Conversion} to <code>window</code>.\n     *\n     * This may not be the same window as is associated with the {@link Europa} instance as this window may be nested\n     * (e.g. a frame).\n     *\n     * @param {Window} window - the window to be set\n     * @return {void}\n     * @public\n     * @memberof Conversion#\n     * @alias window\n     */\n    set: function(window) {\n      this._window = window;\n      this._document = window ? window.document : null;\n    }\n  }\n\n});\n\nUtilities.forOwn(Conversion.replacements, function(value, key) {\n  Conversion.replacementsRegExp[key] = new RegExp(key, 'g');\n});\n\nmodule.exports = Conversion;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\n/**\n * Contains utility methods that are useful when dealing with the DOM.\n *\n * @public\n * @class\n * @extends Nevis\n */\nvar DOMUtilities = Nevis.extend(null, {\n\n  /**\n   * Checks whether the specified <code>element</code> is currently visible using the <code>window</code> provided.\n   *\n   * This is not a very sophisticated check and could easily be mistaken, but it should catch a lot of the most simple\n   * cases.\n   *\n   * @param {Element} element - the element whose visibility is to be checked\n   * @param {Window} window - the window to be used\n   * @return {boolean} <code>true</code> if <code>element</code> is visible; otherwise <code>false</code>.\n   * @public\n   * @static\n   * @memberof DOMUtilities\n   */\n  isVisible: function(element, window) {\n    var style = window.getComputedStyle(element);\n\n    return style.getPropertyValue('display') !== 'none' && style.getPropertyValue('visibility') !== 'hidden';\n  }\n\n});\n\nmodule.exports = DOMUtilities;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\n/**\n * Defines an available option.\n *\n * If <code>defaultValue</code> is a function, it will be called if/when needed and the return value will be used as the\n * default value. If the default value is to be a function itself, then <code>defaultValue</code> must return that\n * function.\n *\n * @param {string} name - the name to be used\n * @param {*} [defaultValue] - the default value to be used\n * @public\n * @class\n * @extends Nevis\n */\nvar Option = Nevis.extend(function(name, defaultValue) {\n  /**\n   * The name for this {@link Option}.\n   *\n   * @public\n   * @type {string}\n   * @memberof Option#\n   */\n  this.name = name;\n\n  this._defaultValue = defaultValue;\n});\n\nObject.defineProperty(Option.prototype, 'defaultValue', {\n  /**\n   * Returns the default value for this {@link Option}.\n   *\n   * @return {*} The default value.\n   * @public\n   * @memberof Option#\n   * @alias defaultValue\n   */\n  get: function() {\n    var defaultValue = this._defaultValue;\n\n    return typeof defaultValue === 'function' ? defaultValue.call(this) : defaultValue;\n  }\n});\n\nmodule.exports = Option;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\n/**\n * Manages multiple {@link Option} instances that are intended to be used by multiple implementations/instances.\n *\n * @param {Option[]} options - the options to be used\n * @public\n * @class\n * @extends Nevis\n */\nvar OptionParser = Nevis.extend(function(options) {\n  /**\n   * The available options for this {@link OptionParser}.\n   *\n   * @public\n   * @type {Option[]}\n   * @memberof OptionParser#\n   */\n  this.options = options;\n}, {\n\n  /**\n   * Returns whether an option with the specified <code>name</code> is available.\n   *\n   * @param {string} name - the name of the {@link Option} whose existence is to be checked\n   * @return {boolean} <code>true</code> if an {@link Option} exists with <code>name</code>; otherwise\n   * <code>false</code>.\n   * @public\n   * @memberof OptionParser#\n   */\n  exists: function(name) {\n    return this.options.some(function(option) {\n      return option.name === name;\n    });\n  },\n\n  /**\n   * Parses the specified <code>options</code>, extracting only properties that match valid options and applying default\n   * values where required.\n   *\n   * @param {Object} [options] - the options to be parsed\n   * @return {Object.<string, *>} The parsed options.\n   * @public\n   * @memberof OptionParser#\n   */\n  parse: function(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var result = {};\n\n    this.options.forEach(function(option) {\n      var name = option.name;\n      var value = options[name] != null ? options[name] : option.defaultValue;\n\n      result[name] = value;\n    });\n\n    return result;\n  }\n\n});\n\nmodule.exports = OptionParser;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\n/**\n * A plugin that can tap into multiple parts in the conversion process while being specific to only a sub-set of tags.\n *\n * @public\n * @class\n * @extends Nevis\n */\nvar Plugin = Nevis.extend({\n\n  /**\n   * Called after {@link Plugin#convert} <b>and</b> only once all children elements have been converted as well,\n   * provided they weren't skipped, and intended for tidying up after the conversion.\n   *\n   * <code>context</code> can be used to receive any state for a single element conversion from {@link Plugin#before}\n   * and {@link Plugin#convert}.\n   *\n   * @param {Conversion} conversion - the current {@link Conversion}\n   * @param {Object.<string, *>} context - the current context for this {@link Plugin}\n   * @return {void}\n   * @public\n   * @memberof Plugin#\n   */\n  after: function(conversion, context) {},\n\n  /**\n   * Called before any elements are converted and intended to setup this {@link Plugin} initially.\n   *\n   * @param {Conversion} conversion - the current {@link Conversion}\n   * @return {void}\n   * @public\n   * @memberof Plugin#\n   */\n  afterAll: function(conversion) {},\n\n  /**\n   * Called immediately before {@link Plugin#convert} and intended for preparing this {@link Plugin} for conversion.\n   *\n   * <code>context</code> can be used to pass any state for a single element conversion to {@link Plugin#convert} and\n   * then to {@link Plugin#after}.\n   *\n   * @param {Conversion} conversion - the current {@link Conversion}\n   * @param {Object.<string, *>} context - the current context for this {@link Plugin}\n   * @return {void}\n   * @public\n   * @memberof Plugin#\n   */\n  before: function(conversion, context) {},\n\n  /**\n   * Called after all elements have been converted and intended to completing any steps for this {@link Plugin}.\n   *\n   * @param {Conversion} conversion - the current {@link Conversion}\n   * @return {void}\n   * @public\n   * @memberof Plugin#\n   */\n  beforeAll: function(conversion) {},\n\n  /**\n   * Converts the current element within the specified <code>conversion</code> which can be used to provide control over\n   * the conversion and returns whether the children of the element should be converted.\n   *\n   * <code>context</code> can be used to pass any state for a single element conversion from {@link Plugin#before} to\n   * {@link Plugin#after}.\n   *\n   * @param {Conversion} conversion - the current {@link Conversion}\n   * @param {Object.<string, *>} context - the current context for this {@link Plugin}\n   * @return {boolean} <code>true</code> if the children of the current element should be converted; otherwise\n   * <code>false</code>.\n   * @public\n   * @memberof Plugin#\n   */\n  convert: function(conversion, context) {\n    return true;\n  },\n\n  /**\n   * Returns the names of tags with which this {@link Plugin} should be registered to handle.\n   *\n   * @return {string[]} The names of supported tags.\n   * @public\n   * @memberof Plugin#\n   */\n  getTagNames: function() {\n    return [];\n  }\n\n});\n\nmodule.exports = Plugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\n/**\n * A basic manager for {@link Service} implementations that are mapped to simple names.\n *\n * @public\n * @class\n * @extends Nevis\n */\nvar ServiceManager = Nevis.extend(function() {\n  this._services = {};\n}, {\n\n  /**\n   * Returns the {@link Service} being managed with the specified <code>name</code>.\n   *\n   * @param {string} name - the name of the {@link Service} to be returned\n   * @return {Service} The {@link Service} is being managed with <code>name</code>.\n   * @throws {Error} If no {@link Service} is being managed with <code>name</code>.\n   * @public\n   * @memberof ServiceManager#\n   */\n  getService: function(name) {\n    var service = this._services[name];\n    if (!service) {\n      throw new Error('Service is not being managed with name: ' + name);\n    }\n\n    return service;\n  },\n\n  /**\n   * Sets the {@link Service} implementation to be managed for the specified <code>name</code> to the\n   * <code>service</code> provided.\n   *\n   * @param {string} name - the name of the {@link Service} to be managed with <code>name</code>\n   * @param {Service} service - the {@link Service} implementation to be managed\n   * @return {void}\n   * @throws {Error} If a {@link Service} is already being managed with the same <code>name</code>.\n   * @public\n   * @memberof ServiceManager#\n   */\n  setService: function(name, service) {\n    if (this._services[name]) {\n      throw new Error('Service is already managed with name: ' + name);\n    }\n\n    if (service) {\n      this._services[name] = service;\n    }\n  }\n\n});\n\nmodule.exports = ServiceManager;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\nvar Conversion = require('./Conversion');\nvar DOMUtilities = require('./util/DOMUtilities');\nvar Option = require('./option/Option');\nvar OptionParser = require('./option/OptionParser');\nvar Plugin = require('./plugin/Plugin');\nvar ServiceManager = require('./service/ServiceManager');\nvar Utilities = require('./util/Utilities');\n\nvar plugins = {};\nvar serviceManager = new ServiceManager();\n\n/**\n * Enables configuration of a HTML to Markdown converter that supports HTML strings and DOM elements.\n *\n * @param {Europa~Options} [options] - the options to be used\n * @public\n * @class\n * @extends Nevis\n */\nvar Europa = Nevis.extend(function(options) {\n  this._options = new OptionParser([\n    new Option('absolute', false),\n    new Option('baseUri', function() {\n      return serviceManager.getService('window').getDefaultBaseUri();\n    }),\n    new Option('inline', false)\n  ])\n  .parse(options);\n  this._window = null;\n}, {\n\n  /**\n   * Converts the specified <code>html</code> into Markdown based on the options configured for this {@link Europa}\n   * instance.\n   *\n   * <code>html</code> can either be an HTML string or a DOM element whose HTML contents are to be converted into\n   * Markdown.\n   *\n   * @param {Element|string} html - the HTML (or element whose inner HTML is) to be converted into Markdown\n   * @return {string} The Markdown converted from <code>html</code>.\n   * @public\n   * @memberof Europa#\n   */\n  convert: function(html) {\n    if (!html) {\n      return '';\n    }\n\n    var document = this.document;\n    var root;\n\n    if (typeof html === 'string') {\n      root = document.createElement('div');\n      root.innerHTML = html;\n    } else {\n      root = html;\n    }\n\n    var conversion = new Conversion(this, this._options);\n    var wrapper;\n\n    if (!document.contains(root)) {\n      wrapper = document.createElement('div');\n      wrapper.style.display = 'none';\n      wrapper.appendChild(root);\n\n      document.body.appendChild(wrapper);\n    }\n\n    try {\n      Utilities.forOwn(plugins, function(plugin) {\n        plugin.beforeAll(conversion);\n      });\n\n      this.convertElement(root, conversion);\n\n      Utilities.forOwn(plugins, function(plugin) {\n        plugin.afterAll(conversion);\n      });\n    } finally {\n      if (wrapper) {\n        document.body.removeChild(wrapper);\n\n        wrapper.removeChild(root);\n      }\n    }\n\n    return conversion.append('').buffer.trim();\n  },\n\n  /**\n   * Converts the specified <code>element</code> and it's children into Markdown using the <code>conversion</code>\n   * provided.\n   *\n   * Nothing happens if <code>element</code> is <code>null</code> or is invisible (simplified detection used).\n   *\n   * @param {Element} element - the element (along well as it's children) to be converted into Markdown\n   * @param {Conversion} conversion - the current {@link Conversion}\n   * @return {void}\n   * @public\n   * @memberof Europa#\n   */\n  convertElement: function(element, conversion) {\n    if (!element) {\n      return;\n    }\n\n    var convertChildren = false;\n    var window = this.window;\n    var context, i, plugin, value;\n\n    if (element.nodeType === window.Node.ELEMENT_NODE) {\n      if (!DOMUtilities.isVisible(element, window)) {\n        return;\n      }\n\n      conversion.element = element;\n\n      context = {};\n      plugin = plugins[conversion.tagName];\n      convertChildren = true;\n\n      if (plugin) {\n        plugin.before(conversion, context);\n        convertChildren = plugin.convert(conversion, context);\n      }\n\n      if (convertChildren) {\n        for (i = 0; i < element.childNodes.length; i++) {\n          this.convertElement(element.childNodes[i], conversion);\n        }\n      }\n\n      if (plugin) {\n        plugin.after(conversion, context);\n      }\n    } else if (element.nodeType === window.Node.TEXT_NODE) {\n      value = element.nodeValue || '';\n\n      if (conversion.inPreformattedBlock) {\n        conversion.output(value);\n      } else if (conversion.inCodeBlock) {\n        conversion.output(value.replace(/`/g, '\\\\`'));\n      } else {\n        conversion.output(value, true);\n      }\n    }\n  },\n\n  /**\n   * Releases the window used by this {@link Europa} instance.\n   *\n   * This allows closeable {@link WindowService} implementations to close the window and free up resources. However,\n   * this instance can and will simply retrieve another window from the {@link WindowService} the next time it is\n   * required (i.e. {@link Europa#convert} is called).\n   *\n   * @return {Europa} A reference to this {@link Europa} for chaining purposes.\n   * @public\n   * @memberof Europa#\n   */\n  release: function() {\n    if (this._window) {\n      serviceManager.getService('window').closeWindow(this._window);\n      this._window = null;\n    }\n\n    return this;\n  }\n\n}, {\n\n  /**\n   * A convient reference to {@link Plugin} exposed on {@link Europa} for cases where Europa Core is bundled.\n   *\n   * @public\n   * @static\n   * @type {Function}\n   * @memberof Europa\n   */\n  Plugin: Plugin,\n\n  /**\n   * Registers the specified <code>plugin</code> to be used by all {@link Europa} instances.\n   *\n   * If <code>plugin</code> declares support for a tag name which already has a {@link Plugin} registered for it,\n   * <code>plugin</code> will replace the previously registered plugin, but only for conflicting tag names.\n   *\n   * @param {Plugin} plugin - the {@link Plugin} to be registered\n   * @return {void}\n   * @public\n   * @static\n   * @memberof Europa\n   */\n  register: function(plugin) {\n    plugin.getTagNames().forEach(function(tag) {\n      plugins[tag] = plugin;\n    });\n  },\n\n  /**\n   * Configures the <code>service</code> provided to be used by all {@link Europa} instances.\n   *\n   * @param {Service} service - the {@link Service} to be configured\n   * @return {void}\n   * @throws {Error} If a {@link Service} has already been configured with the same name.\n   * @public\n   * @static\n   * @memberof Europa\n   */\n  use: function(service) {\n    serviceManager.setService(service.getName(), service);\n  }\n\n});\n\nObject.defineProperties(Europa.prototype, {\n\n  document: {\n    /**\n     * Returns the document to be used for HTML to Markdown conversion by this {@link Europa} instance.\n     *\n     * @return {Document} The document.\n     * @public\n     * @memberof Europa#\n     * @alias document\n     */\n    get: function() {\n      return this.window.document;\n    }\n  },\n\n  window: {\n    /**\n     * Returns the window to be used for HTML to Markdown conversion by this {@link Europa} instance.\n     *\n     * @return {Window} The window.\n     * @public\n     * @memberof Europa#\n     * @alias window\n     */\n    get: function() {\n      if (!this._window) {\n        this._window = serviceManager.getService('window').getWindow(this._options.baseUri);\n      }\n\n      return this._window;\n    }\n  }\n\n});\n\nmodule.exports = Europa;\n\n/**\n * The options used by {@link Europa}.\n *\n * @typedef {Object} Europa~Options\n * @property {boolean} [absolute=false] - Whether absolute URLS should be used for anchors/images.\n * @property {string} [baseUri] - The base URI for the window. This is ignored in environments where the base URI cannot\n * be changed.\n * @property {boolean} [inline=false] - Whether anchor/image URLs are to be inserted inline.\n */\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which extracts the URL from an anchor. Anchors without an <code>href</code> are treated as plain\n * text.\n *\n * If the <code>absolute</code> option is enabled, then the URL extracted from the anchor will be absolute. Otherwise,\n * the URL will be exactly as it is in the <code>href</code> attribute.\n *\n * If the <code>inline</code> option is enabled, then the URL (and any <code>title</code> on the anchor) will be\n * inserted immediately after the anchor contents (e.g. <code>[foo](/bar)</code>). Otherwise, all unique URL and title\n * combinations will be indexed (e.g. <code>[foo][anchor0]</code>) and the references will be output at the very end.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar AnchorPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    if (context.value != null) {\n      conversion.output(']' + context.value);\n    }\n  },\n\n  /**\n   * @override\n   */\n  afterAll: function(conversion) {\n    var anchors = conversion.context.anchors;\n    if (!anchors.length) {\n      return;\n    }\n\n    conversion.append('\\n\\n');\n\n    for (var i = 0; i < anchors.length; i++) {\n      conversion.append('[anchor' + i + ']: ' + anchors[i] + '\\n');\n    }\n  },\n\n  /**\n   * @override\n   */\n  beforeAll: function(conversion) {\n    conversion.context.anchorMap = {};\n    conversion.context.anchors = [];\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    var element = conversion.element;\n    var options = conversion.options;\n    var href = options.absolute ? element.href : element.getAttribute('href');\n    if (!href) {\n      return true;\n    }\n\n    var anchorMap = conversion.context.anchorMap;\n    var anchors = conversion.context.anchors;\n    var title = element.getAttribute('title');\n    var value = title ? href + ' \"' + title + '\"' : href;\n    var index;\n\n    if (options.inline) {\n      context.value = '(' + value + ')';\n    } else {\n      index = anchorMap[value];\n      if (index == null) {\n        index = anchors.push(value) - 1;\n\n        anchorMap[value] = index;\n      }\n\n      context.value = '[anchor' + index + ']';\n    }\n\n    conversion.output('[');\n\n    conversion.atNoWhiteSpace = true;\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'a' ];\n  }\n\n});\n\nEuropa.register(new AnchorPlugin());\n\nmodule.exports = AnchorPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs the contents in a block quote.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar BlockQuotePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.atLeft = false;\n    conversion.atParagraph = false;\n    conversion.left = context.previousLeft;\n\n    conversion.appendParagraph();\n  },\n\n  /**\n   * @override\n   */\n  before: function(conversion, context) {\n    context.previousLeft = conversion.left;\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    var value = '> ';\n\n    conversion.left += value;\n\n    if (conversion.atParagraph) {\n      conversion.append(value);\n    } else {\n      conversion.appendParagraph();\n    }\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [\n      'blockquote',\n      'dd'\n    ];\n  }\n\n});\n\nEuropa.register(new BlockQuotePlugin());\n\nmodule.exports = BlockQuotePlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs an inline line break.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar BreakPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    conversion.append('  ' + conversion.left);\n\n    conversion.atLeft = true;\n    conversion.atNoWhiteSpace = true;\n\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'br' ];\n  }\n\n});\n\nEuropa.register(new BreakPlugin());\n\nmodule.exports = BreakPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs the contents in a code block.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar CodePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    if (!context.skipped) {\n      conversion.inCodeBlock = context.previousInCodeBlock;\n\n      conversion.output('`');\n    }\n  },\n\n  /**\n   * @override\n   */\n  before: function(conversion, context) {\n    context.previousInCodeBlock = conversion.inCodeBlock;\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    if (conversion.inPreformattedBlock) {\n      context.skipped = true;\n    } else {\n      conversion.output('`');\n\n      conversion.inCodeBlock = true;\n    }\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [\n      'code',\n      'kbd',\n      'samp'\n    ];\n  }\n\n});\n\nEuropa.register(new CodePlugin());\n\nmodule.exports = CodePlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs a definition term as strong text.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar DefinitionTermPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.output('**');\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    conversion.appendParagraph();\n\n    conversion.output('**');\n\n    conversion.atNoWhiteSpace = true;\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'dt' ];\n  }\n\n});\n\nEuropa.register(new DefinitionTermPlugin());\n\nmodule.exports = DefinitionTermPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs a details section.\n *\n * If the details has an <code>open</code> attribute then all of its children are converted. Otherwise, only the nested\n * <code>summary</code>, if any, will be converted.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar DetailsPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    var element = conversion.element;\n\n    conversion.appendParagraph();\n\n    if (element.hasAttribute('open')) {\n      return true;\n    }\n\n    var summary = element.querySelector('summary');\n    conversion.europa.convertElement(summary, conversion);\n\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'details' ];\n  }\n\n});\n\nEuropa.register(new DetailsPlugin());\n\nmodule.exports = DetailsPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs as emphasised text.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar EmphasisPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.output('_');\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    conversion.output('_');\n\n    conversion.atNoWhiteSpace = true;\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [\n      'cite',\n      'dfn',\n      'em',\n      'i',\n      'u',\n      'var'\n    ];\n  }\n\n});\n\nEuropa.register(new EmphasisPlugin());\n\nmodule.exports = EmphasisPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which simply ensures that no children elements are converted.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar EmptyPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [\n      'applet',\n      'area',\n      'audio',\n      'button',\n      'canvas',\n      'datalist',\n      'embed',\n      'head',\n      'input',\n      'map',\n      'menu',\n      'meter',\n      'noframes',\n      'noscript',\n      'object',\n      'optgroup',\n      'option',\n      'param',\n      'progress',\n      'rp',\n      'rt',\n      'ruby',\n      'script',\n      'select',\n      'style',\n      'textarea',\n      'title',\n      'video'\n    ];\n  }\n\n});\n\nEuropa.register(new EmptyPlugin());\n\nmodule.exports = EmptyPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs the contents of nested frame.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar FramePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.window = context.previousWindow;\n  },\n\n  /**\n   * @override\n   */\n  before: function(conversion, context) {\n    context.previousWindow = conversion.window;\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    var window = conversion.element.contentWindow;\n\n    if (window) {\n      conversion.window = window;\n\n      conversion.europa.convertElement(window.document.body, conversion);\n    }\n\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'frame', 'iframe' ];\n  }\n\n});\n\nEuropa.register(new FramePlugin());\n\nmodule.exports = FramePlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs a heading of various levels.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar HeadingPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    var level = parseInt(conversion.tagName.match(/([1-6])$/)[1], 10);\n\n    conversion.appendParagraph();\n\n    var heading = '';\n    for (var i = 0; i < level; i++) {\n      heading += '#';\n    }\n\n    conversion.output(heading + ' ');\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n  }\n\n});\n\nEuropa.register(new HeadingPlugin());\n\nmodule.exports = HeadingPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs a horizontal rule.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar HorizontalRulePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    conversion\n      .appendParagraph()\n      .output('---')\n      .appendParagraph();\n\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'hr' ];\n  }\n\n});\n\nEuropa.register(new HorizontalRulePlugin());\n\nmodule.exports = HorizontalRulePlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which extracts the URL from an image.\n *\n * If the <code>absolute</code> option is enabled, then the URL extracted from the image will be absolute. Otherwise,\n * the URL will be exactly as it is in the <code>src</code> attribute.\n *\n * If the <code>inline</code> option is enabled, then the URL will be inserted immediately after the <code>alt</code> on\n * the image (e.g. <code>![foo](/bar.png)</code>). Otherwise, all unique URLs will be indexed\n * (e.g. <code>![foo][image0]</code>) and the references will be output at the very end.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar ImagePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  afterAll: function(conversion) {\n    var images = conversion.context.images;\n    if (!images.length) {\n      return;\n    }\n\n    conversion.append('\\n\\n');\n\n    for (var i = 0; i < images.length; i++) {\n      conversion.append('[image' + i + ']: ' + images[i] + '\\n');\n    }\n  },\n\n  /**\n   * @override\n   */\n  beforeAll: function(conversion) {\n    conversion.context.imageMap = {};\n    conversion.context.images = [];\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    var element = conversion.element;\n    var options = conversion.options;\n    var source = options.absolute ? element.src : element.getAttribute('src');\n    if (!source) {\n      return false;\n    }\n\n    var alternativeText = element.getAttribute('alt') || '';\n    var imageMap = conversion.context.imageMap;\n    var images = conversion.context.images;\n    var title = element.getAttribute('title');\n    var value = title ? source + ' \"' + title + '\"' : source;\n    var index;\n\n    if (options.inline) {\n      value = '(' + value + ')';\n    } else {\n      index = imageMap[value];\n      if (index == null) {\n        index = images.push(value) - 1;\n\n        imageMap[value] = index;\n      }\n\n      value = '[image' + index + ']';\n    }\n\n    conversion.output('![' + alternativeText + ']' + value);\n\n    return false;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'img' ];\n  }\n\n});\n\nEuropa.register(new ImagePlugin());\n\nmodule.exports = ImagePlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\nvar Utilities = require('../../util/Utilities');\n\n/**\n * A {@link Plugin} which outputs a list item. The prefix for the list item will vary depending on what type of list the\n * item is contained within.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar ListItemPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    var value = conversion.inOrderedList ? conversion.listIndex++ + '. ' : '* ';\n\n    if (!conversion.atLeft) {\n      conversion.append(conversion.left.replace(/[ ]{2,4}$/, '\\n'));\n\n      conversion.atLeft = true;\n      conversion.atNoWhiteSpace = true;\n      conversion.atParagraph = true;\n    } else if (conversion.last) {\n      conversion.last = conversion.last.replace(/[ ]{2,4}$/, '\\n');\n    }\n\n    conversion.append(Utilities.leftPad(value, (conversion.listDepth - 1) * 2));\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'li' ];\n  }\n\n});\n\nEuropa.register(new ListItemPlugin());\n\nmodule.exports = ListItemPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs an ordered list.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar OrderedListPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.inOrderedList = context.previousInOrderedList;\n    conversion.listIndex = context.previousListIndex;\n    conversion.listDepth--;\n  },\n\n  /**\n   * @override\n   */\n  before: function(conversion, context) {\n    context.previousInOrderedList = conversion.inOrderedList;\n    context.previousListIndex = conversion.listIndex;\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    if (conversion.listDepth === 0) {\n      conversion.appendParagraph();\n    }\n\n    conversion.inOrderedList = true;\n    conversion.listIndex = 1;\n    conversion.listDepth++;\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'ol' ];\n  }\n\n});\n\nEuropa.register(new OrderedListPlugin());\n\nmodule.exports = OrderedListPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs a paragraph.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar ParagraphPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    conversion.appendParagraph();\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [\n      'address',\n      'article',\n      'aside',\n      'div',\n      'fieldset',\n      'footer',\n      'header',\n      'nav',\n      'p',\n      'section'\n    ];\n  }\n\n});\n\nEuropa.register(new ParagraphPlugin());\n\nmodule.exports = ParagraphPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs the contents in a preformatted block.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar PreformattedPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.atLeft = false;\n    conversion.atParagraph = false;\n    conversion.inPreformattedBlock = context.previousInPreformattedBlock;\n    conversion.left = context.previousLeft;\n\n    conversion.appendParagraph();\n  },\n\n  /**\n   * @override\n   */\n  before: function(conversion, context) {\n    context.previousInPreformattedBlock = conversion.inPreformattedBlock;\n    context.previousLeft = conversion.left;\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    var value = '    ';\n\n    conversion.left += value;\n\n    if (conversion.atParagraph) {\n      conversion.append(value);\n    } else {\n      conversion.appendParagraph();\n    }\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'pre' ];\n  }\n\n});\n\nEuropa.register(new PreformattedPlugin());\n\nmodule.exports = PreformattedPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs as quoted text.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar QuotePlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.output('\"');\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    conversion.output('\"');\n\n    conversion.atNoWhiteSpace = true;\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'q' ];\n  }\n\n});\n\nEuropa.register(new QuotePlugin());\n\nmodule.exports = QuotePlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs as strong text.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar StrongPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.output('**');\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    conversion.output('**');\n\n    conversion.atNoWhiteSpace = true;\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [\n      'b',\n      'strong'\n    ];\n  }\n\n});\n\nEuropa.register(new StrongPlugin());\n\nmodule.exports = StrongPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('../../Europa');\nvar Plugin = require('../Plugin');\n\n/**\n * A {@link Plugin} which outputs an unordered list.\n *\n * @public\n * @class\n * @extends Plugin\n */\nvar UnorderedListPlugin = Plugin.extend({\n\n  /**\n   * @override\n   */\n  after: function(conversion, context) {\n    conversion.inOrderedList = context.previousInOrderedList;\n    conversion.listIndex = context.previousListIndex;\n    conversion.listDepth--;\n  },\n\n  /**\n   * @override\n   */\n  before: function(conversion, context) {\n    context.previousInOrderedList = conversion.inOrderedList;\n    context.previousListIndex = conversion.listIndex;\n  },\n\n  /**\n   * @override\n   */\n  convert: function(conversion, context) {\n    if (conversion.listDepth === 0) {\n      conversion.appendParagraph();\n    }\n\n    conversion.inOrderedList = false;\n    conversion.listIndex = 1;\n    conversion.listDepth++;\n\n    return true;\n  },\n\n  /**\n   * @override\n   */\n  getTagNames: function() {\n    return [ 'ul' ];\n  }\n\n});\n\nEuropa.register(new UnorderedListPlugin());\n\nmodule.exports = UnorderedListPlugin;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('./src/Europa');\nrequire('./src/plugin/preset/default');\n\nmodule.exports = Europa;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Nevis = require('nevis/lite');\n\n/**\n * Defines a service contract that must be met by all implementations.\n *\n * @public\n * @class\n * @extends Nevis\n */\nvar Service = Nevis.extend({\n\n  /**\n   * Returns the name of this {@link Service}.\n   *\n   * @return {string} The service name.\n   * @public\n   * @abstract\n   * @memberof Service#\n   */\n  getName: function() {}\n\n});\n\nmodule.exports = Service;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Service = require('../Service');\n\n/**\n * A service used to retrieve the window object for converting HTML to Markdown and, optionally, to close it upon\n * destruction of the {@link Europa} instance. This can be useful to free up resources as/when required in an artificial\n * browser environment.\n *\n * @public\n * @class\n * @extends Service\n */\nvar WindowService = Service.extend({\n\n  /**\n   * Closes the specified <code>window</code> but only if this {@link WindowService} is closeable.\n   *\n   * @param {Window} window - the window to be closed\n   * @return {void}\n   * @public\n   * @memberof WindowService#\n   */\n  closeWindow: function(window) {\n    if (this.isCloseable(window)) {\n      window.close();\n    }\n  },\n\n  /**\n   * Returns the default base URI for windows provided by this {@link WindowService}.\n   *\n   * Implementations of {@link WindowService} <b>must</b> override this method with their own specific logic.\n   *\n   * @return {string} The default base URI.\n   * @public\n   * @abstract\n   * @memberof WindowService#\n   */\n  getDefaultBaseUri: function() {},\n\n  /**\n   * @override\n   */\n  getName: function() {\n    return 'window';\n  },\n\n  /**\n   * Returns a window to be used for converting HTML to Markdown using the base URI provided.\n   *\n   * It's important to note that the base URI cannot be changed in some environments, in which case <code>baseUri</code>\n   * will be ignored.\n   *\n   * Implementations of {@link WindowService} <b>must</b> override this method with their own specific logic.\n   *\n   * @param {string} baseUri - the base URI to be used\n   * @return {Window} The window.\n   * @public\n   * @abstract\n   * @memberof WindowService#\n   */\n  getWindow: function(baseUri) {},\n\n  /**\n   * Returns whether the specified <code>window</code> which was retrieved by this {@link WindowService} is closeable.\n   *\n   * The default implementation of this method will always return <code>false</code>.\n   *\n   * @param {Window} window - the window to be checked\n   * @return {boolean} <code>true</code> if <code>window</code> is closeable; otherwise <code>false</code>.\n   * @public\n   * @memberof WindowService#\n   */\n  isCloseable: function(window) {\n    return false;\n  }\n\n});\n\nmodule.exports = WindowService;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar WindowService = require('europa-core/src/service/window/WindowService');\n\n/**\n * An implementation of {@link WindowService} intended for use within a browser environment.\n *\n * @public\n * @class\n * @extends WindowService\n */\nvar BrowserWindowService = WindowService.extend({\n\n  /**\n   * @override\n   */\n  getDefaultBaseUri: function() {\n    return window.document.baseURI;\n  },\n\n  /**\n   * @override\n   */\n  getWindow: function(baseUri) {\n    return window;\n  }\n\n});\n\nmodule.exports = BrowserWindowService;\n","/*\n * Copyright (C) 2017 Alasdair Mercer, !ninja\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n'use strict';\n\nvar Europa = require('europa-core');\n\nvar BrowserWindowService = require('./service/window/BrowserWindowService');\n\nEuropa.use(new BrowserWindowService());\n\nmodule.exports = Europa;\n"],"names":["extend","require$$0","Nevis","Utilities","ServiceManager","OptionParser","Option","Conversion","DOMUtilities","Plugin","Europa","Service","WindowService","BrowserWindowService"],"mappings":"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"}